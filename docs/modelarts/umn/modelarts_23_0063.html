<a name="modelarts_23_0063"></a><a name="modelarts_23_0063"></a>

<h1 class="topictitle1">Accessing a Real-Time Service (Token-based Authentication)</h1>
<div id="body8662426"><p id="modelarts_23_0063__en-us_topic_0165025308_p8060118">If a real-time service is in the <strong id="modelarts_23_0063__en-us_topic_0165025308_b17442241195920">Running</strong> state, the real-time service has been deployed successfully. This service provides a standard RESTful API for users to call. Before integrating the API to the production environment, commission the API. You can use either of the following methods to send an inference request to the real-time service:</p>
<p id="modelarts_23_0063__p17547410318"><a href="#modelarts_23_0063__en-us_topic_0165025308_section959354162911">Method 1: Use GUI-based Software for Inference (Postman)</a> (Postman is recommended for Windows.)</p>
<p id="modelarts_23_0063__p17192101811311"><a href="#modelarts_23_0063__en-us_topic_0165025308_section104131434203114">Method 2: Run the cURL Command to Send an Inference Request</a> (curl commands are recommended for Linux.)</p>
<div class="section" id="modelarts_23_0063__en-us_topic_0165025308_section959354162911"><a name="modelarts_23_0063__en-us_topic_0165025308_section959354162911"></a><a name="en-us_topic_0165025308_section959354162911"></a><h4 class="sectiontitle">Method 1: Use GUI-based Software for Inference (Postman)</h4><ol id="modelarts_23_0063__en-us_topic_0165025308_ol15525734103016"><li id="modelarts_23_0063__en-us_topic_0165025308_li115251434113018">Download Postman and install it, or install the Postman Chrome extension. Alternatively, use other software that can send POST requests. Postman 7.24.0 is recommended.</li><li id="modelarts_23_0063__en-us_topic_0165025308_li661263785312">Open Postman.</li><li id="modelarts_23_0063__en-us_topic_0165025308_li11612737105318">Set parameters on Postman. The following uses image classification as an example.<ul id="modelarts_23_0063__en-us_topic_0165025308_ul4806125593412"><li id="modelarts_23_0063__en-us_topic_0165025308_li17806115520345">Select a POST task and copy the API URL to the POST text box. To obtain the API URL of the real-time service, switch to the <strong id="modelarts_23_0063__en-us_topic_0165025308_b121471941145215">Usage Guides</strong> tab on the page providing details about the real-time service. On the <strong id="modelarts_23_0063__en-us_topic_0165025308_b939910171519">Headers</strong> tab page, set <strong id="modelarts_23_0063__en-us_topic_0165025308_b1797417410155">Key</strong> to <strong id="modelarts_23_0063__en-us_topic_0165025308_b4346131081516">X-Auth-Token</strong> and <strong id="modelarts_23_0063__en-us_topic_0165025308_b18340171461510">Value</strong> to the obtained token.<p id="modelarts_23_0063__en-us_topic_0165025308_p362062312397"></p>
<p id="modelarts_23_0063__en-us_topic_0165025308_p4352144613912"></p>
</li><li id="modelarts_23_0063__en-us_topic_0165025308_li84351510123519">On the <strong id="modelarts_23_0063__en-us_topic_0165025308_b138582017191314">Body</strong> tab page, file input and text input are available.<ul id="modelarts_23_0063__en-us_topic_0165025308_ul7803191615556"><li id="modelarts_23_0063__en-us_topic_0165025308_li18804516185510"><strong id="modelarts_23_0063__en-us_topic_0165025308_b204311337171014">File input</strong><p id="modelarts_23_0063__en-us_topic_0165025308_p8342172473918">Select <strong id="modelarts_23_0063__en-us_topic_0165025308_b1854162417241">form-data</strong>. Set <strong id="modelarts_23_0063__en-us_topic_0165025308_b12788958151216">KEY</strong> to the input parameter of the model, for example, <strong id="modelarts_23_0063__en-us_topic_0165025308_b187882058121213">images</strong>. Set <strong id="modelarts_23_0063__en-us_topic_0165025308_b15905141094211">VALUE</strong> to an image to be inferred (only one image can be inferred).</p>
</li><li id="modelarts_23_0063__en-us_topic_0165025308_li8804101665518"><strong id="modelarts_23_0063__en-us_topic_0165025308_b19963326191110">Text input</strong><p id="modelarts_23_0063__en-us_topic_0165025308_p16261352447">Select <strong id="modelarts_23_0063__en-us_topic_0165025308_b134621119142">raw</strong> and then <strong id="modelarts_23_0063__en-us_topic_0165025308_b8462319144">JSON(application/json)</strong>. Enter the request body in the text box below. An example request body is as follows:</p>
<pre class="screen" id="modelarts_23_0063__en-us_topic_0165025308_screen692118415560">{
  "meta": {
    "uuid": "10eb0091-887f-4839-9929-cbc884f1e20e"
  },
  "data": {
    "req_data": [
      {
        "sepal_length": 3,
        "sepal_width": 1,
        "petal_length": 2.2,
        "petal_width": 4
      }
    ]
  }
}</pre>
<p id="modelarts_23_0063__en-us_topic_0165025308_p1335621018445"><strong id="modelarts_23_0063__en-us_topic_0165025308_b191314101513">meta</strong> can carry a universally unique identifier (UUID). When you call an API, the system provides a UUID. When the inference result is returned, the UUID is returned to trace the request. If you do not need this function, leave <strong id="modelarts_23_0063__en-us_topic_0165025308_b31344171520">meta</strong> blank. <strong id="modelarts_23_0063__en-us_topic_0165025308_b11911516101515">data</strong> contains a <strong id="modelarts_23_0063__en-us_topic_0165025308_b2091151620157">req_data</strong> array for one or multiple pieces of input data. The parameters of each piece of data are determined by the model, such as <strong id="modelarts_23_0063__en-us_topic_0165025308_b1991161661514">sepal_length</strong> and <strong id="modelarts_23_0063__en-us_topic_0165025308_b49118162154">sepal_width</strong> in this example.</p>
</li></ul>
</li></ul>
</li><li id="modelarts_23_0063__en-us_topic_0165025308_li383185412302">After setting the parameters, click <strong id="modelarts_23_0063__en-us_topic_0165025308_b927724131310">Send</strong> to send the request. The result is displayed in the response.<ul id="modelarts_23_0063__en-us_topic_0165025308_ul2831195414306"><li id="modelarts_23_0063__en-us_topic_0165025308_li1674934673711">Inference result using file input: The field values in the return result vary with the model.</li><li id="modelarts_23_0063__en-us_topic_0165025308_li7831354103017">Inference result using text input: The request body contains <strong id="modelarts_23_0063__en-us_topic_0165025308_b115941212181313">meta</strong> and <strong id="modelarts_23_0063__en-us_topic_0165025308_b860691217132">data</strong>. If the request contains <strong id="modelarts_23_0063__en-us_topic_0165025308_b1765182781317">uuid</strong>, <strong id="modelarts_23_0063__en-us_topic_0165025308_b5652192741319">uuid</strong> will be returned in the response. Otherwise, <strong id="modelarts_23_0063__en-us_topic_0165025308_b6705340130">uuid</strong> is left blank. <strong id="modelarts_23_0063__en-us_topic_0165025308_b1570920373135">data</strong> contains a <strong id="modelarts_23_0063__en-us_topic_0165025308_b27101376131">resp_data</strong> array for the inference results of one or multiple pieces of input data. The parameters of each result are determined by the model, for example, <strong id="modelarts_23_0063__en-us_topic_0165025308_b15711937141315">sepal_length</strong> and <strong id="modelarts_23_0063__en-us_topic_0165025308_b157126376135">predictresult</strong> in this example.</li></ul>
</li></ol>
</div>
<div class="section" id="modelarts_23_0063__en-us_topic_0165025308_section104131434203114"><a name="modelarts_23_0063__en-us_topic_0165025308_section104131434203114"></a><a name="en-us_topic_0165025308_section104131434203114"></a><h4 class="sectiontitle">Method 2: Run the cURL Command to Send an Inference Request</h4><p id="modelarts_23_0063__en-us_topic_0165025308_p1049143623115">The command for sending inference requests can be input as a file or text.</p>
</div>
<ol id="modelarts_23_0063__en-us_topic_0165025308_ol15792125564819"><li id="modelarts_23_0063__en-us_topic_0165025308_li4792165510484">File input<pre class="screen" id="modelarts_23_0063__en-us_topic_0165025308_screen42675920590">curl -k -F '<strong id="modelarts_23_0063__en-us_topic_0165025308_b2326124016176">images</strong>=@<em id="modelarts_23_0063__i157631639101414">Image path</em>' -H '<strong id="modelarts_23_0063__en-us_topic_0165025308_b10326114017179">X-Auth-Token</strong>:<em id="modelarts_23_0063__i876513901418">Token value</em>' -X POST <em id="modelarts_23_0063__i876612398142">Real-time service URL</em></pre>
<ul id="modelarts_23_0063__en-us_topic_0165025308_ul1243910553810"><li id="modelarts_23_0063__li1032814168292"><span class="parmname" id="modelarts_23_0063__parmname13442318123717"><b>-k</b></span> indicates that SSL websites can be accessed without using a security certificate.</li><li id="modelarts_23_0063__en-us_topic_0165025308_li1643945133818"><strong id="modelarts_23_0063__en-us_topic_0165025308_b1761023945511">-F</strong> indicates file input. In this example, the parameter name is <strong id="modelarts_23_0063__en-us_topic_0165025308_b231491610564">images</strong>, which can be changed as required. The image storage path follows <strong id="modelarts_23_0063__en-us_topic_0165025308_b16983303579">@</strong>.</li><li id="modelarts_23_0063__en-us_topic_0165025308_li9439195133813"><strong id="modelarts_23_0063__en-us_topic_0165025308_b61671548656">-H</strong> indicates the header of the POST command. <strong id="modelarts_23_0063__en-us_topic_0165025308_b618394819514">X-Auth-Token</strong> is the <strong id="modelarts_23_0063__en-us_topic_0165025308_b114506351163">KEY</strong> value on the <strong id="modelarts_23_0063__en-us_topic_0165025308_b3341103813612">Headers</strong> page. <em id="modelarts_23_0063__en-us_topic_0165025308_i1018316481859">Token value</em> indicates the obtained token. For details about how to obtain the token, see .</li><li id="modelarts_23_0063__en-us_topic_0165025308_li743911533811"><strong id="modelarts_23_0063__en-us_topic_0165025308_b11722123532710">POST</strong> is followed by the API URL of the real-time service.</li></ul>
<p id="modelarts_23_0063__en-us_topic_0165025308_p184393583810">The following is an example of the cURL command for inference with file input:</p>
<pre class="screen" id="modelarts_23_0063__en-us_topic_0165025308_screen1331471905">curl -k -F 'images=@/home/data/test.png' -H 'X-Auth-Token:MIISkAY***80T9wHQ==' -X POST https://modelarts-infers-1.xxx/v1/infers/eb3e0c54-3dfa-4750-af0c-95c45e5d3e83</pre>
</li><li id="modelarts_23_0063__en-us_topic_0165025308_li13114135884815">Text input<pre class="screen" id="modelarts_23_0063__en-us_topic_0165025308_screen13158333018">curl -k -d '{"data":{"req_data":[{"sepal_length":3,"sepal_width":1,"petal_length":2.2,"petal_width":4}]}}' -H 'X-Auth-Token:MIISkAY***80T9wHQ==' -H 'Content-type: application/json' -X POST https://modelarts-infers-1.xxx/v1/infers/eb3e0c54-3dfa-4750-af0c-95c45e5d3e83</pre>
<p id="modelarts_23_0063__en-us_topic_0165025308_p1679565418268"><strong id="modelarts_23_0063__en-us_topic_0165025308_b5376154111511">-d</strong> indicates the text input of the request body.</p>
</li></ol>
</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="modelarts_23_0059.html">Real-Time Services</a></div>
</div>
</div>

