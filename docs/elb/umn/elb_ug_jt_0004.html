<a name="elb_ug_jt_0004"></a><a name="elb_ug_jt_0004"></a>

<h1 class="topictitle1">Sticky Session</h1>
<p id="elb_ug_jt_0004__p1690516158451">Sticky sessions ensure that requests from a client always get routed to the same backend server before a session elapses.</p>
<p id="elb_ug_jt_0004__p35451136122116">Here is an example that describes what sticky sessions. Assume that you have logged in to a server. After a while, you send another request. If sticky sessions are not enabled, the request may be routed to another server, and you will be asked to log in again. If sticky sessions are enabled, all your requests are processed by the same server, and you do not need to repeatedly log in.</p>
<p id="elb_ug_jt_0004__p6655158124917">Sticky sessions at Layer 4 are different from those at Layer 7.</p>
<h4 class="sectiontitle">Prerequisites</h4><p id="elb_ug_jt_0004__p1124012154320">You have selected <strong id="elb_ug_jt_0004__b11406310314">Weighted round robin</strong> for <strong id="elb_ug_jt_0004__b18421735313">Load Balancing Algorithm</strong>.</p>

<h4 class="sectiontitle">Differences Between Sticky Sessions at Layer 4 and Layer 7</h4>
<table cellpadding="4" cellspacing="0" summary="" id="elb_ug_jt_0004__table5918161554815" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Sticky session comparison</caption><thead align="left"><tr id="elb_ug_jt_0004__row8919201511489"><th align="left" class="cellrowborder" valign="top" width="13.15%" id="mcps1.3.5.2.2.6.1.1"><p id="elb_ug_jt_0004__p1491931554819">OSI Layer</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="16.53%" id="mcps1.3.5.2.2.6.1.2"><p id="elb_ug_jt_0004__p18980102313558">Listener's Protocol</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="26.43%" id="mcps1.3.5.2.2.6.1.3"><p id="elb_ug_jt_0004__p18919151514484">Sticky Session Type</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="23.74%" id="mcps1.3.5.2.2.6.1.4"><p id="elb_ug_jt_0004__p1291914151483">Stickiness Duration</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="20.150000000000002%" id="mcps1.3.5.2.2.6.1.5"><p id="elb_ug_jt_0004__p1295014719418">Scenarios Where Sticky Sessions Become Invalid</p>
</th>
</tr>
</thead>
<tbody><tr id="elb_ug_jt_0004__row1919115124817"><td class="cellrowborder" valign="top" width="13.15%" headers="mcps1.3.5.2.2.6.1.1 "><p id="elb_ug_jt_0004__p129191015104819">Layer 4</p>
</td>
<td class="cellrowborder" valign="top" width="16.53%" headers="mcps1.3.5.2.2.6.1.2 "><p id="elb_ug_jt_0004__p9981192345518">TCP or UDP</p>
</td>
<td class="cellrowborder" valign="top" width="26.43%" headers="mcps1.3.5.2.2.6.1.3 "><p id="elb_ug_jt_0004__p16849193616155"><strong id="elb_ug_jt_0004__b2248782816">Source IP address</strong>: The source IP address of each request is calculated using the consistent hashing algorithm to obtain a unique hash key, and all backend servers are numbered. The system allocates the client to a particular server based on the generated key. This enables requests from different clients to be routed and ensures that a client is directed to the same server that it was using previously.</p>
</td>
<td class="cellrowborder" valign="top" width="23.74%" headers="mcps1.3.5.2.2.6.1.4 "><ul id="elb_ug_jt_0004__ul1474243881"><li id="elb_ug_jt_0004__li774215316817">Default: 20 minutes</li><li id="elb_ug_jt_0004__li17127114510818">Maximum: 1 hour</li><li id="elb_ug_jt_0004__li318717151083">Range: 1 minute to 60 minutes</li></ul>
</td>
<td class="cellrowborder" valign="top" width="20.150000000000002%" headers="mcps1.3.5.2.2.6.1.5 "><ul id="elb_ug_jt_0004__ul1194171716104"><li id="elb_ug_jt_0004__li494121712103">Source IP addresses of the clients change.</li><li id="elb_ug_jt_0004__li18941121751018">The session stickiness duration has been reached.</li></ul>
</td>
</tr>
<tr id="elb_ug_jt_0004__row8919315114814"><td class="cellrowborder" valign="top" width="13.15%" headers="mcps1.3.5.2.2.6.1.1 "><p id="elb_ug_jt_0004__p59191115134815">Layer 7</p>
</td>
<td class="cellrowborder" valign="top" width="16.53%" headers="mcps1.3.5.2.2.6.1.2 "><p id="elb_ug_jt_0004__p598112315519">HTTP or HTTPS</p>
</td>
<td class="cellrowborder" valign="top" width="26.43%" headers="mcps1.3.5.2.2.6.1.3 "><ul id="elb_ug_jt_0004__ul470514260718"><li id="elb_ug_jt_0004__li07051126277"><strong id="elb_ug_jt_0004__b19659101662811">Load balancer cookie</strong>: The load balancer generates a cookie after receiving a request from the client. All subsequent requests with the same cookie are then routed to the same backend server.</li><li id="elb_ug_jt_0004__li26437361715"><strong id="elb_ug_jt_0004__b716812231288">Application cookie</strong>: The application deployed on the backend server generates a cookie after receiving the first request from the client. All requests with the same cookie generated by backend application are then routed to the same backend server.</li></ul>
</td>
<td class="cellrowborder" valign="top" width="23.74%" headers="mcps1.3.5.2.2.6.1.4 "><ul id="elb_ug_jt_0004__ul59105339918"><li id="elb_ug_jt_0004__li99104331591">Default: 20 minutes</li><li id="elb_ug_jt_0004__li391073312918">Maximum: 24 hours</li><li id="elb_ug_jt_0004__li9910733590">Range: 1 minute to 1,440 minutes</li></ul>
</td>
<td class="cellrowborder" valign="top" width="20.150000000000002%" headers="mcps1.3.5.2.2.6.1.5 "><ul id="elb_ug_jt_0004__ul567905261617"><li id="elb_ug_jt_0004__li1167935241610">If requests sent by the clients do not contain a cookie, sticky sessions will not take effect.</li><li id="elb_ug_jt_0004__li15679652111619">The session stickiness duration has been reached.</li></ul>
</td>
</tr>
</tbody>
</table>


<p id="elb_ug_jt_0004__p216414332322">Dedicated load balancers support two types of sticky sessions: <strong id="elb_ug_jt_0004__b6628320982">Source IP address</strong> and <strong id="elb_ug_jt_0004__b18640020283">Load balancer cookie</strong></p>
<p id="elb_ug_jt_0004__p54511541112810"><span id="elb_ug_jt_0004__ph15170164618279">Shared</span> load balancers support three types of sticky session, including <strong id="elb_ug_jt_0004__b6428724101910">Source IP address</strong>, <strong id="elb_ug_jt_0004__b042012813191">Load balancer cookie</strong>, and <strong id="elb_ug_jt_0004__b1364663541915">Application cookie</strong>.</p>
<p id="elb_ug_jt_0004__p14306181612818">Classic load balancers support <strong id="elb_ug_jt_0004__b12522114711192">Source IP address</strong>.</p>
<img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><p id="elb_ug_jt_0004__p1129116891613">Classic load balancers can no longer be created on the management console. Use shared load balancers or dedicated load balancers instead.</p>
</div>
<h4 class="sectiontitle">Enabling Sticky Sessions</h4><ol id="elb_ug_jt_0004__ol6929211526"><li id="elb_ug_jt_0004__li677391520332">Log in to the management console.</li><li id="elb_ug_jt_0004__li675519100420">In the upper left corner of the page, click <span><img id="elb_ug_jt_0004__en-us_topic_0240829509_image177714713415" src="en-us_image_0241356603.png"></span> and select the desired region and project.</li><li id="elb_ug_jt_0004__li83736197297">Hover on <span><img id="elb_ug_jt_0004__en-us_topic_0052569751_en-us_topic_0052569751_image616618613" src="en-us_image_0000001120894978.png"></span> in the upper left corner to display <strong id="elb_ug_jt_0004__en-us_topic_0052569751_b9121102522212">Service List</strong> and choose <strong id="elb_ug_jt_0004__en-us_topic_0052569751_b61222025142217">Network</strong> &gt; <strong id="elb_ug_jt_0004__en-us_topic_0052569751_b4124425142210">Elastic Load Balancing</strong>.</li><li id="elb_ug_jt_0004__li17925265212">Locate the load balancer and click its name.</li><li id="elb_ug_jt_0004__li123611226161118">For <span id="elb_ug_jt_0004__ph14980183614423">a shared</span> load balancer and a dedicated load balancer, click <strong id="elb_ug_jt_0004__b12841742204913">Backend Server Groups</strong>, locate the backend server group, and click <span><img id="elb_ug_jt_0004__image75731540163117" src="en-us_image_0167649598.png"></span> on the right of its name.<p id="elb_ug_jt_0004__p9729154520315">For a classic load balancer, click <strong id="elb_ug_jt_0004__b33801711155913">Listeners</strong>, locate the listener, and click <strong id="elb_ug_jt_0004__b1654192645919">Modify</strong> in the <strong id="elb_ug_jt_0004__b1579633535916">Operation</strong> column.</p>
</li><li id="elb_ug_jt_0004__li17924214528">Enable <strong id="elb_ug_jt_0004__b428235111272">Sticky Session</strong>, select the sticky session type, and set the session stickiness duration.</li><li id="elb_ug_jt_0004__li10921729528">Click <strong id="elb_ug_jt_0004__b486555916496">OK</strong>.</li></ol>
<img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><p id="elb_ug_jt_0004__p103212555357">You can also configure sticky sessions when adding a listener or creating a backend server group.</p>
</div>




<strong>Parent topic:</strong> <a href="en-us_topic_0015479923.html">Listener</a>



