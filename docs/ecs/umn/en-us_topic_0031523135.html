<a name="EN-US_TOPIC_0031523135"></a><a name="EN-US_TOPIC_0031523135"></a>

<h1 class="topictitle1">Changing the OS</h1>
<div id="body1465299569106"><div class="section" id="EN-US_TOPIC_0031523135__section44633721195915"><h4 class="sectiontitle">Scenarios</h4><p id="EN-US_TOPIC_0031523135__p393121161518">Changing an <span id="EN-US_TOPIC_0031523135__text4778336112417">ECS</span> OS will change the system disk attached to the <span id="EN-US_TOPIC_0031523135__text114055388016">ECS</span>. After the changing, the system disk ID of the <span id="EN-US_TOPIC_0031523135__text88756374246">ECS</span> will be changed, and the original system disk will be deleted.</p>
<p id="EN-US_TOPIC_0031523135__p1161765124318">If the OS running on an <span id="EN-US_TOPIC_0031523135__text1975123916248">ECS</span> cannot meet service requirements, change the <span id="EN-US_TOPIC_0031523135__text10604694117">ECS</span> OS.</p>
<p id="EN-US_TOPIC_0031523135__p116185911858">The public cloud supports changing between image types (public images, private images, and shared images) and between OSs. You can change your OS by changing your ECS image.</p>
</div>
<div class="section" id="EN-US_TOPIC_0031523135__section21723173114530"><h4 class="sectiontitle">Constraints</h4><ul id="EN-US_TOPIC_0031523135__ul66848156141149"><li id="EN-US_TOPIC_0031523135__li61491838141054">The EVS disk quota must be greater than 0.</li><li id="EN-US_TOPIC_0031523135__li1307534113527">H2 ECSs do not support OS change.</li><li id="EN-US_TOPIC_0031523135__li5399152414277">If an ECS OS is to be changed using a full-ECS image, the ECS system disk can be encrypted.</li></ul>
</div>
<div class="section" id="EN-US_TOPIC_0031523135__section34193483165818"><h4 class="sectiontitle">Notes</h4><ul id="EN-US_TOPIC_0031523135__ul57938298174117"><li id="EN-US_TOPIC_0031523135__li4523794174117">After the OS is changed, the original OS is not retained, and the original system disk is deleted, including the data in all partitions of the system disk.</li><li id="EN-US_TOPIC_0031523135__li11628132425511">Back up data before changing the OS. For details, see <em id="EN-US_TOPIC_0031523135__i46552375561"></em><em id="EN-US_TOPIC_0031523135__i1657315417311"></em>.</li><li id="EN-US_TOPIC_0031523135__li15142465169">Changing the OS does not affect data in data disks.</li><li id="EN-US_TOPIC_0031523135__li4111648121710">After the OS is changed, your service running environment must be deployed in the new OS again.</li><li id="EN-US_TOPIC_0031523135__li20928142617465">After the OS is changed, the <span id="EN-US_TOPIC_0031523135__text1482784142414">ECS</span> will be automatically started.</li><li id="EN-US_TOPIC_0031523135__li12911023610">After the OS is changed, the system disk type of the ECS cannot be changed.</li><li id="EN-US_TOPIC_0031523135__li3784113720411">After the OS is changed, the IP and MAC addresses of the <span id="EN-US_TOPIC_0031523135__text116191542192414">ECS</span> remain unchanged.</li><li id="EN-US_TOPIC_0031523135__li1996774354616">After the OS is changed, customized configurations, such as DNS and hostname of the original OS will be reset and require reconfiguration.</li><li id="EN-US_TOPIC_0031523135__li153642091262">It takes about 10 to 20 minutes to change the OS. During this process, the <span id="EN-US_TOPIC_0031523135__text84597433244">ECS</span> is in <strong id="EN-US_TOPIC_0031523135__b1965965515210">Changing OS</strong> state.</li><li id="EN-US_TOPIC_0031523135__li683555421620">Do not perform any operations on the ECS immediately after its OS is changed. Wait for several minutes until the system successfully injects the password or key. Otherwise, the injection may fail, and the ECS cannot be logged in to.</li><li id="EN-US_TOPIC_0031523135__li439952411274">After the OS is changed, the password for logging in to the ECS is reset. To retrieve the password, perform the following operations:<ul id="EN-US_TOPIC_0031523135__ul1739982472717"><li id="EN-US_TOPIC_0031523135__li1939952412713">For a Linux ECS, log in to it using the key and set a new password. For instructions about how to log in to an ECS using a key pair, see <a href="en-us_topic_0017955380.html">Login Using an SSH Key</a>.</li><li id="EN-US_TOPIC_0031523135__li73991224142715">For a Windows ECS, retrieve the password by following the instructions provided in <a href="en-us_topic_0031107266.html">Obtaining the Password for Logging In to a Windows ECS</a>.</li></ul>
</li></ul>
<ul id="EN-US_TOPIC_0031523135__ul18707673284"><li id="EN-US_TOPIC_0031523135__li10954135083316">The system disk capacity of an <span id="EN-US_TOPIC_0031523135__text109953488248">ECS</span> with OS changed may change because the system disk capacity specified by the image of the changed OS may be changed.</li><li id="EN-US_TOPIC_0031523135__li14700191710294">You can choose to encrypt the system disk of an ECS during OS change.</li></ul>
</div>
<div class="section" id="EN-US_TOPIC_0031523135__section1852122261012"><h4 class="sectiontitle">Notes on Change Between Different OSs</h4><p id="EN-US_TOPIC_0031523135__p18122171781114">Change between different OSs indicates that the OS is changed between Windows and Linux.</p>
<ul id="EN-US_TOPIC_0031523135__ul465265720559"><li id="EN-US_TOPIC_0031523135__li116521157105519">To change Windows to Linux, install an NTFS partition tool, such as NTFS-3G for data reading and writing on the Windows ECS.</li><li id="EN-US_TOPIC_0031523135__li1865219579552">To change Linux to Windows, install software, such as Ext2Read or Ext2Fsd to identify ext3 or ext4.<div class="note" id="EN-US_TOPIC_0031523135__note1024618431261"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TOPIC_0031523135__p324654313618">You are not advised to change Linux to Window on the cloud platform. The reason is as follows: If there are LVM partitions on the Linux ECS, these partitions may fail after the OS is changed to Windows.</p>
</div></div>
</li></ul>
</div>
<div class="section" id="EN-US_TOPIC_0031523135__section10065433195938"><h4 class="sectiontitle">Prerequisites</h4><ul id="EN-US_TOPIC_0031523135__ul5982276195952"><li id="EN-US_TOPIC_0031523135__li31738699195952">The target <span id="EN-US_TOPIC_0031523135__text101571750152418">ECS</span> is stopped.</li><li id="EN-US_TOPIC_0031523135__li4397542520019">The target <span id="EN-US_TOPIC_0031523135__text49488517246">ECS</span> has a system disk attached.</li><li id="EN-US_TOPIC_0031523135__li62686098144932">Necessary data has been backed up. (Changing the OS clears the data in all partitions of the system disk, including the system partition.)</li><li id="EN-US_TOPIC_0031523135__li191271414510">If the original ECS uses password authentication while the new ECS uses key pair authentication, ensure that a key pair is available.</li><li id="EN-US_TOPIC_0031523135__li19425937143519">If a private image is required for changing the ECS OS, create the desired private image by following the instructions provided in <em id="EN-US_TOPIC_0031523135__i3685165822115">Image Management Service User Guide</em>.<ul id="EN-US_TOPIC_0031523135__ul16160101111503"><li id="EN-US_TOPIC_0031523135__li112128495415">If an <span id="EN-US_TOPIC_0031523135__text09165316244">ECS</span> image is required, make sure that a private image has been created using the <span id="EN-US_TOPIC_0031523135__text96993218519">ECS</span>.</li><li id="EN-US_TOPIC_0031523135__li19120046204513">If a local image file is required, make sure that the image file has been imported to the cloud platform and registered as a private image.</li><li id="EN-US_TOPIC_0031523135__li1838258174613">If a private image from another region is required, make sure that the image has been copied.</li><li id="EN-US_TOPIC_0031523135__li19484544194814">If a private image from another user account is required, make sure that the image has been shared with you.</li></ul>
</li></ul>
</div>
<div class="section" id="EN-US_TOPIC_0031523135__section208284422018"><h4 class="sectiontitle">Procedure</h4><ol id="EN-US_TOPIC_0031523135__ol6031768220119"><li id="EN-US_TOPIC_0031523135__li3490190117228">Log in to the management console.</li><li id="EN-US_TOPIC_0031523135__li464234814566">Click <span><img id="EN-US_TOPIC_0031523135__en-us_topic_0014250631_image1862675853202121" src="en-us_image_0210779229.png"></span> in the upper left corner and select your region and project.</li><li id="EN-US_TOPIC_0031523135__en-us_topic_0031523135_en-us_topic_0024911405_li45082966143628"><a name="EN-US_TOPIC_0031523135__en-us_topic_0031523135_en-us_topic_0024911405_li45082966143628"></a><a name="en-us_topic_0031523135_en-us_topic_0024911405_li45082966143628"></a>Under <strong id="EN-US_TOPIC_0031523135__b842352706201456"><span id="EN-US_TOPIC_0031523135__text1980763462719">Computing</span></strong>, click <strong id="EN-US_TOPIC_0031523135__b84235270620150">Elastic Cloud Server</strong>.</li><li id="EN-US_TOPIC_0031523135__li1085462314256">Locate the row containing the target <span id="EN-US_TOPIC_0031523135__text18919411255">ECS</span>. Click <strong id="EN-US_TOPIC_0031523135__b232315336513">More</strong> in the <strong id="EN-US_TOPIC_0031523135__b1572133715513">Operation</strong> column and select <strong id="EN-US_TOPIC_0031523135__b6638114817463">Manage Image/Disk</strong> &gt; <strong id="EN-US_TOPIC_0031523135__b123641742556">Change OS</strong>.<p id="EN-US_TOPIC_0031523135__p3854122302512">Only stopped <span id="EN-US_TOPIC_0031523135__text6308195102518">ECS</span>s support OS changing. If the <span id="EN-US_TOPIC_0031523135__text7164698613">ECS</span> is not stopped, stop it before proceeding with changing.</p>
</li><li id="EN-US_TOPIC_0031523135__li359341520111">Modify related <span id="EN-US_TOPIC_0031523135__text128339443259">ECS</span> parameters, such as <strong id="EN-US_TOPIC_0031523135__b157867277810">Image Type</strong> and <strong id="EN-US_TOPIC_0031523135__b16431831583">Image</strong>, based on service requirements.<p id="EN-US_TOPIC_0031523135__p4891784120112">For more details, see <a href="en-us_topic_0021831611.html">Creating an ECS</a>.</p>
</li><li id="EN-US_TOPIC_0031523135__li8531832155310">(Optional) Select the <strong id="EN-US_TOPIC_0031523135__b1408122218304">Encryption</strong> option to encrypt the system disk during OS change.<p id="EN-US_TOPIC_0031523135__p767712438280">To enable encryption, click <span class="uicontrol" id="EN-US_TOPIC_0031523135__en-us_topic_0163572589_en-us_topic_0144542112_uicontrol528614138616"><b>Create Xrole</b></span> to assign KMS access permissions to EVS. If you have rights granting permission, assign the KMS access permissions to EVS. If you do not have the permission, contact the user having the security administrator rights to assign the KMS access permissions. For more details, see <a href="en-us_topic_0047272493.html">Can All Users Use the Encryption Feature?</a></p>
<p id="EN-US_TOPIC_0031523135__en-us_topic_0144542112_p228631310615">Encryption parameters are as follows:</p>
<ul id="EN-US_TOPIC_0031523135__en-us_topic_0144542112_ul202865131169"><li id="EN-US_TOPIC_0031523135__en-us_topic_0163572589_en-us_topic_0144542112_li14286813962"><strong id="EN-US_TOPIC_0031523135__en-us_topic_0163572589_en-us_topic_0013859510_b84235270618740">Encryption</strong>: indicates that the EVS disk has been encrypted.</li><li id="EN-US_TOPIC_0031523135__en-us_topic_0163572589_en-us_topic_0144542112_li182868131664"><strong id="EN-US_TOPIC_0031523135__en-us_topic_0163572589_en-us_topic_0013859510_b8423527061882">Create Xrole</strong>: assigns KMS access permissions to EVS to obtain KMS keys. After the permissions are assigned, follow-up operations do not require assigning permissions again.</li><li id="EN-US_TOPIC_0031523135__en-us_topic_0163572589_en-us_topic_0144542112_li152868131619"><strong id="EN-US_TOPIC_0031523135__en-us_topic_0163572589_b959511561916">KMS Key Name</strong>: specifies the name of the key used by the encrypted EVS disk. You can select an existing key, or click <strong id="EN-US_TOPIC_0031523135__en-us_topic_0163572589_b2406645144311">Create KMS Key</strong> and create a new one on the KMS console. The default value is <strong id="EN-US_TOPIC_0031523135__en-us_topic_0163572589_b626615844413">evs/default</strong>.</li><li id="EN-US_TOPIC_0031523135__en-us_topic_0163572589_en-us_topic_0144542112_li5286191313611"><strong id="EN-US_TOPIC_0031523135__en-us_topic_0163572589_en-us_topic_0013859510_b84235270615143">Xrole Name: EVSAccessKMS</strong>: specifies that permissions have been assigned to EVS to obtain KMS keys for encrypting or decrypting EVS disks.</li><li id="EN-US_TOPIC_0031523135__en-us_topic_0163572589_en-us_topic_0144542112_li528671319610"><strong id="EN-US_TOPIC_0031523135__en-us_topic_0163572589_en-us_topic_0013859510_b842352706155046">KMS Key ID</strong>: specifies the ID of the key used by the encrypted data disk.</li></ul>
</li><li id="EN-US_TOPIC_0031523135__li17273849113530">(Optional) Select a <strong id="EN-US_TOPIC_0031523135__b84235270615319">License Type</strong> (<strong id="EN-US_TOPIC_0031523135__b842352706153129">Use license from the system</strong> or <strong id="EN-US_TOPIC_0031523135__b842352706153134">Bring your own license (BYOL)</strong>) if the changed OS running on your ECS is billed. For more details, see <a href="en-us_topic_0046566932.html">License Type</a>.<div class="p" id="EN-US_TOPIC_0031523135__p57004530113530">The following OSs are billed:<ul id="EN-US_TOPIC_0031523135__ul43278730113530"><li id="EN-US_TOPIC_0031523135__en-us_topic_0046566932_li2586589022251">SUSE Linux Enterprise Server</li><li id="EN-US_TOPIC_0031523135__en-us_topic_0046566932_li6521605722253">Oracle Enterprise Linux</li><li id="EN-US_TOPIC_0031523135__en-us_topic_0046566932_li37000181205155">Red Hat Enterprise Linux</li></ul>
</div>
</li><li id="EN-US_TOPIC_0031523135__li5336143212240">Configure the login mode.<p id="EN-US_TOPIC_0031523135__p1154194111115"><a name="EN-US_TOPIC_0031523135__li5336143212240"></a><a name="li5336143212240"></a>If the target <span id="EN-US_TOPIC_0031523135__text1916311471252">ECS</span> uses key pair authentication, you can replace the original key pair.</p>
</li><li id="EN-US_TOPIC_0031523135__en-us_topic_0031523135_en-us_topic_0024911405_li4798821517833">Click <strong id="EN-US_TOPIC_0031523135__b153798544917">OK</strong>.</li><li id="EN-US_TOPIC_0031523135__en-us_topic_0031523135_en-us_topic_0024911405_li45992498111556"><a name="EN-US_TOPIC_0031523135__en-us_topic_0031523135_en-us_topic_0024911405_li45992498111556"></a><a name="en-us_topic_0031523135_en-us_topic_0024911405_li45992498111556"></a>On the <strong id="EN-US_TOPIC_0031523135__b154321536134511">Change ECS OS</strong> page, confirm the specifications, and click <strong id="EN-US_TOPIC_0031523135__b92606107463">Submit Application</strong>.<p id="EN-US_TOPIC_0031523135__p4013850816820">After the application is submitted, the <span id="EN-US_TOPIC_0031523135__text15818650162514">ECS</span> status changes to <strong id="EN-US_TOPIC_0031523135__b84235270616717">Changing OS</strong>. The OS changing has been completed when <strong id="EN-US_TOPIC_0031523135__b5174921112616">Changing OS</strong> disappears.</p>
<div class="note" id="EN-US_TOPIC_0031523135__note1993244016842"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TOPIC_0031523135__p3492635716815">A temporary <span id="EN-US_TOPIC_0031523135__text26231188142">ECS</span> is created during the OS changing process. After the process is complete, this <span id="EN-US_TOPIC_0031523135__text1418210226147">ECS</span> will be automatically deleted.</p>
</div></div>
</li></ol>
</div>
<div class="section" id="EN-US_TOPIC_0031523135__section6296573110114"><h4 class="sectiontitle">Follow-up Procedure</h4><ul id="EN-US_TOPIC_0031523135__ul4795134972312"><li id="EN-US_TOPIC_0031523135__li195531036181619">If the OSs before and after the OS change are both Linux, and automatic partition mounting upon system startup has been enabled for the data disk, the data disk partition mounting information will be lost after the OS is changed. In such a case, you need to update the <strong id="EN-US_TOPIC_0031523135__b14132191695315">/etc/fstab</strong> configuration.<ol id="EN-US_TOPIC_0031523135__ol1872074232416"><li id="EN-US_TOPIC_0031523135__li3720104202410">Write the new partition information into <strong id="EN-US_TOPIC_0031523135__b192164695410">/etc/fstab</strong>.<p id="EN-US_TOPIC_0031523135__p39926243116">It is a good practice to back up the <strong id="EN-US_TOPIC_0031523135__b19396757185410">/etc/fstab</strong> file before writing data into it.</p>
<p id="EN-US_TOPIC_0031523135__p20852173863413">To enable automatic partition mounting upon system startup, see <a href="en-us_topic_0085634797.html">Initializing a Linux Data Disk (fdisk)</a>.</p>
</li><li id="EN-US_TOPIC_0031523135__li54436398246">Mount the partition so that you can use the data disk.<p id="EN-US_TOPIC_0031523135__p59351323337"><a name="EN-US_TOPIC_0031523135__li54436398246"></a><a name="li54436398246"></a><strong id="EN-US_TOPIC_0031523135__b1785919239581">mount</strong> <em id="EN-US_TOPIC_0031523135__i7864172319584">Disk partition</em> <em id="EN-US_TOPIC_0031523135__i1386562311589">Device name</em></p>
</li><li id="EN-US_TOPIC_0031523135__li212413912617">Check the mount result.<p id="EN-US_TOPIC_0031523135__p11281039767"><a name="EN-US_TOPIC_0031523135__li212413912617"></a><a name="li212413912617"></a><strong id="EN-US_TOPIC_0031523135__b143744411567">df -TH</strong></p>
</li></ol>
</li><li id="EN-US_TOPIC_0031523135__li127064517245">If the OS change is unsuccessful, perform steps <a href="#EN-US_TOPIC_0031523135__en-us_topic_0031523135_en-us_topic_0024911405_li45082966143628">3</a> to <a href="#EN-US_TOPIC_0031523135__en-us_topic_0031523135_en-us_topic_0024911405_li45992498111556">10</a> again to retry changing the OS again.</li><li id="EN-US_TOPIC_0031523135__li207061356245">If the second OS change attempt is unsuccessful, contact customer service for manual recovery at the backend.</li></ul>
</div>
</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="en-us_topic_0176502615.html">Managing ECSs</a></div>
</div>
</div>

