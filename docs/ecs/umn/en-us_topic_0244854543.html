<a name="EN-US_TOPIC_0244854543"></a><a name="EN-US_TOPIC_0244854543"></a>

<h1 class="topictitle1">How Can I Change a Remote Login Port?</h1>
<div id="body1589370770925"><div class="section" id="EN-US_TOPIC_0244854543__section948631195311"><h4 class="sectiontitle">Scenarios</h4><p id="EN-US_TOPIC_0244854543__p2079511813532">This section describes how to change a port for remote logins.</p>
</div>
<div class="section" id="EN-US_TOPIC_0244854543__section83487871019"><h4 class="sectiontitle">Windows</h4><p id="EN-US_TOPIC_0244854543__p658919331320">The following procedure uses an ECS running Windows Server 2012 as an example. The default login port of a Windows <span id="EN-US_TOPIC_0244854543__text13576421467">ECS</span> is 3389. To change it to port 2020, for example, do as follows:</p>
<ol id="EN-US_TOPIC_0244854543__ol24311821171219"><li id="EN-US_TOPIC_0244854543__li17431152111121">In the <strong id="EN-US_TOPIC_0244854543__b1516313598599">Run</strong> dialog box, enter <strong id="EN-US_TOPIC_0244854543__b201971661709">regedit</strong> to access the registry editor.</li><li id="EN-US_TOPIC_0244854543__li168442040161410">In <strong id="EN-US_TOPIC_0244854543__b8559112111520">Registry Editor</strong>, choose <strong id="EN-US_TOPIC_0244854543__b147010364516">HKEY_LOCAL_MACHINE</strong> &gt; <strong id="EN-US_TOPIC_0244854543__b139501143955">SYSTEM</strong> &gt; <strong id="EN-US_TOPIC_0244854543__b10694161469">CurrentControlSet</strong> &gt; <strong id="EN-US_TOPIC_0244854543__b2017316181862">Control</strong> &gt; <strong id="EN-US_TOPIC_0244854543__b72311361968">Terminal Server</strong> &gt; <strong id="EN-US_TOPIC_0244854543__b18608154910615">Wds</strong> &gt; <strong id="EN-US_TOPIC_0244854543__b1939816577616">rdpwd</strong> &gt; <strong id="EN-US_TOPIC_0244854543__b4781241271">Tds</strong> &gt; <strong id="EN-US_TOPIC_0244854543__b4646181018719">tcp</strong> and double-click <strong id="EN-US_TOPIC_0244854543__b26419341715">PortNumber</strong>.<ol type="a" id="EN-US_TOPIC_0244854543__ol19416365222"><li id="EN-US_TOPIC_0244854543__li97585102212">In the dialog box that is displayed, set <strong id="EN-US_TOPIC_0244854543__b1852714271986">Base</strong> to <strong id="EN-US_TOPIC_0244854543__b111763117813">Decimal</strong>.</li><li id="EN-US_TOPIC_0244854543__li1170952919211">Change the value in <strong id="EN-US_TOPIC_0244854543__b857481910917">Value data</strong> to the new port number, which is <strong id="EN-US_TOPIC_0244854543__b82681745592">2020</strong> in this example.<div class="fignone" id="EN-US_TOPIC_0244854543__fig6797745202319"><span class="figcap"><b>Figure 1 </b>Changing the port number to 2020</span><br><span><img id="EN-US_TOPIC_0244854543__image3513720192417" src="en-us_image_0244859999.png"></span></div>
</li></ol>
</li><li id="EN-US_TOPIC_0244854543__li119721384160">In <strong id="EN-US_TOPIC_0244854543__b92401020101112">Registry Editor</strong>, choose <strong id="EN-US_TOPIC_0244854543__b1334984411111">HKEY_LOCAL_MACHINE</strong> &gt; <strong id="EN-US_TOPIC_0244854543__b1990819478119">SYSTEM</strong> &gt; <strong id="EN-US_TOPIC_0244854543__b18461115310112">CurrentControlSet</strong> &gt; <strong id="EN-US_TOPIC_0244854543__b179241310141211">Control</strong> &gt; <strong id="EN-US_TOPIC_0244854543__b77902142123">Terminal Server</strong> &gt; <strong id="EN-US_TOPIC_0244854543__b132769426123">WinStations</strong> &gt; <strong id="EN-US_TOPIC_0244854543__b185804506128">RDP-Tcp</strong> and double-click <strong id="EN-US_TOPIC_0244854543__b1272132921311">PortNumber</strong>.<ol type="a" id="EN-US_TOPIC_0244854543__ol84929632710"><li id="EN-US_TOPIC_0244854543__en-us_topic_0244854543_li97585102212">In the dialog box that is displayed, set <strong id="EN-US_TOPIC_0244854543__en-us_topic_0244854543_b1852714271986">Base</strong> to <strong id="EN-US_TOPIC_0244854543__en-us_topic_0244854543_b111763117813">Decimal</strong>.</li><li id="EN-US_TOPIC_0244854543__en-us_topic_0244854543_li1170952919211">Change the value in <strong id="EN-US_TOPIC_0244854543__en-us_topic_0244854543_b857481910917">Value data</strong> to the new port number, which is <strong id="EN-US_TOPIC_0244854543__en-us_topic_0244854543_b82681745592">2020</strong> in this example.<div class="fignone" id="EN-US_TOPIC_0244854543__en-us_topic_0244854543_fig6797745202319"><span class="figcap"><b>Figure 2 </b>Changing the port number to 2020</span><br><span><img id="EN-US_TOPIC_0244854543__en-us_topic_0244854543_image3513720192417" src="en-us_image_0244859999.png"></span></div>
</li></ol>
</li><li id="EN-US_TOPIC_0244854543__li13501171813119">(Skip this step if the firewall is disabled.) Modify the inbound rules of the firewall.<p id="EN-US_TOPIC_0244854543__p589322683410"><a name="EN-US_TOPIC_0244854543__li13501171813119"></a><a name="li13501171813119"></a>Choose <strong id="EN-US_TOPIC_0244854543__b16231829172010">Control Panel</strong> &gt; <strong id="EN-US_TOPIC_0244854543__b10965105211207">Windows Firewall</strong> &gt; <strong id="EN-US_TOPIC_0244854543__b1395683182112">Advanced Settings</strong> &gt; <strong id="EN-US_TOPIC_0244854543__b157584862114">Inbound Rules</strong> &gt; <strong id="EN-US_TOPIC_0244854543__b7966526153016">New Rule</strong>.</p>
<ul id="EN-US_TOPIC_0244854543__ul58011523103415"><li id="EN-US_TOPIC_0244854543__li178018238340"><strong id="EN-US_TOPIC_0244854543__b187531013113319">Rule Type</strong>: <strong id="EN-US_TOPIC_0244854543__b12674542133312">Port</strong></li><li id="EN-US_TOPIC_0244854543__li080172333413">Protocol in <strong id="EN-US_TOPIC_0244854543__b2752174415331">Protocol and Ports</strong>: <strong id="EN-US_TOPIC_0244854543__b4752184411333">TCP</strong></li><li id="EN-US_TOPIC_0244854543__li14801923193419">Port in <strong id="EN-US_TOPIC_0244854543__b188921235143712">Protocol and Ports</strong>: <strong id="EN-US_TOPIC_0244854543__b382454183717">Specific local ports</strong>, <strong id="EN-US_TOPIC_0244854543__b764258153816">2020</strong> in this example</li><li id="EN-US_TOPIC_0244854543__li780118235345"><strong id="EN-US_TOPIC_0244854543__b13994132223819">Action</strong>: <strong id="EN-US_TOPIC_0244854543__b2420202783916">Allow the connection</strong></li><li id="EN-US_TOPIC_0244854543__li88011423113416"><strong id="EN-US_TOPIC_0244854543__b1732153814392">Profile</strong>: Default settings</li><li id="EN-US_TOPIC_0244854543__li10801172316342"><strong id="EN-US_TOPIC_0244854543__b14362163119403">Name</strong>: <strong id="EN-US_TOPIC_0244854543__b274684514013">RDP-2020</strong></li></ul>
<p id="EN-US_TOPIC_0244854543__p611181817174">After the configuration, refresh the page to view the new rule.</p>
</li><li id="EN-US_TOPIC_0244854543__li2680143951712">Modify the security group rule.<p id="EN-US_TOPIC_0244854543__p968023991711"><a name="EN-US_TOPIC_0244854543__li2680143951712"></a><a name="li2680143951712"></a>Add an inbound rule in which <strong id="EN-US_TOPIC_0244854543__b19014273423">Protocol</strong> is set to <strong id="EN-US_TOPIC_0244854543__b930733115424">TCP</strong> and <strong id="EN-US_TOPIC_0244854543__b141812298432">Port Range</strong> is set to <strong id="EN-US_TOPIC_0244854543__b119503554317">2020</strong>.</p>
<p id="EN-US_TOPIC_0244854543__p13992164084513">For details, see "Adding a Security Group Rule" in the <em id="EN-US_TOPIC_0244854543__i794164104111">Virtual Private Cloud User Guide</em>.</p>
<p id="EN-US_TOPIC_0244854543__p768083912170">Use port 2020 to remotely log in to the <span id="EN-US_TOPIC_0244854543__text16845172514212">ECS</span>.</p>
</li><li id="EN-US_TOPIC_0244854543__li7290155611419">Open the Windows search box, enter <strong id="EN-US_TOPIC_0244854543__b4974124816385">services</strong>, and select <strong id="EN-US_TOPIC_0244854543__b3981194893820">Services</strong>.<div class="fignone" id="EN-US_TOPIC_0244854543__fig10290145619416"><span class="figcap"><b>Figure 3 </b>Selecting Services</span><br><span><img id="EN-US_TOPIC_0244854543__image1229013566419" src="en-us_image_0000001292832517.png" title="Click to enlarge" class="imgResize"></span></div>
</li><li id="EN-US_TOPIC_0244854543__li198634731616">In the <strong id="EN-US_TOPIC_0244854543__b18428927161814">Services</strong> window, restart <strong id="EN-US_TOPIC_0244854543__b111961919194">Remote Desktop Services</strong> or the ECS.</li><li id="EN-US_TOPIC_0244854543__li165144514515">Use "IP address:Port" to remotely access the ECS.</li></ol>
</div>
<div class="section" id="EN-US_TOPIC_0244854543__section488818350534"><h4 class="sectiontitle">Linux</h4><p id="EN-US_TOPIC_0244854543__p051717178547">The following procedure uses an ECS running CentOS 7.3 as an example. The default login port of a Linux <span id="EN-US_TOPIC_0244854543__text14242038184619">ECS</span> is 22. To change it to port 2020, for example, do as follows:</p>
<ol id="EN-US_TOPIC_0244854543__ol921424911551"><li id="EN-US_TOPIC_0244854543__li621411497559">Run the following command to edit the sshd configuration file:<p id="EN-US_TOPIC_0244854543__p199520179562"><a name="EN-US_TOPIC_0244854543__li621411497559"></a><a name="li621411497559"></a><strong id="EN-US_TOPIC_0244854543__b127342199567">vi /etc/ssh/sshd_config</strong></p>
</li><li id="EN-US_TOPIC_0244854543__li184603202579">Delete the comment tag (#) from the <strong id="EN-US_TOPIC_0244854543__b3673450204414">#port 22</strong> line and change <strong id="EN-US_TOPIC_0244854543__b1611475711446">22</strong> to <strong id="EN-US_TOPIC_0244854543__b1610138174519">2020</strong>.<div class="fignone" id="EN-US_TOPIC_0244854543__fig188937250516"><span class="figcap"><b>Figure 4 </b>Changing the port number to 2020</span><br><span><img id="EN-US_TOPIC_0244854543__image208932251152" src="en-us_image_0244856480.png"></span></div>
</li><li id="EN-US_TOPIC_0244854543__li788121612567">Press <strong id="EN-US_TOPIC_0244854543__b479713494456">Esc</strong> to exit Insert mode and enter <strong id="EN-US_TOPIC_0244854543__b98471531622">:wq!</strong> to save the settings and exit.</li><li id="EN-US_TOPIC_0244854543__li111671824133217">Run either of the following commands to restart sshd:<p id="EN-US_TOPIC_0244854543__p78891925163411"><a name="EN-US_TOPIC_0244854543__li111671824133217"></a><a name="li111671824133217"></a><strong id="EN-US_TOPIC_0244854543__b20262143114346">service sshd restart</strong></p>
<p id="EN-US_TOPIC_0244854543__p9587193220343">Or</p>
<p id="EN-US_TOPIC_0244854543__p14471205343"><strong id="EN-US_TOPIC_0244854543__b13477206344">systemctl restart sshd</strong></p>
</li><li id="EN-US_TOPIC_0244854543__li20553123855810">Skip this step if the firewall is disabled. Configure the firewall.<p id="EN-US_TOPIC_0244854543__p4740624114211"><a name="EN-US_TOPIC_0244854543__li20553123855810"></a><a name="li20553123855810"></a>The firewall varies depending on the CentOS version. CentOS 7 uses firewalld, and CentOS 6 uses iptables. The following operations use CentOS 7 as an example.</p>
<p id="EN-US_TOPIC_0244854543__p10429722134220">Run the <strong id="EN-US_TOPIC_0244854543__b7429102264217">firewall-cmd --state</strong> command to check the firewall status.</p>
<ul id="EN-US_TOPIC_0244854543__ul10430162284210"><li id="EN-US_TOPIC_0244854543__li10430172219429">(Recommended) Method 1: Add information about a new port to firewalld.<ol type="a" id="EN-US_TOPIC_0244854543__ol2022314111506"><li id="EN-US_TOPIC_0244854543__li1715622595015">Run the following commands to add a rule for port 2020:<p id="EN-US_TOPIC_0244854543__p215612253504"><a name="EN-US_TOPIC_0244854543__li1715622595015"></a><a name="li1715622595015"></a><strong id="EN-US_TOPIC_0244854543__b415662514505">firewall-cmd --zone=public --add-port=2020/tcp --permanent</strong></p>
<p id="EN-US_TOPIC_0244854543__p1315614258508"><strong id="EN-US_TOPIC_0244854543__b115672585016">firewall-cmd --reload</strong></p>
</li><li id="EN-US_TOPIC_0244854543__li16156225145013">View the added port. The TCP connection of port 2020 will have been added.<p id="EN-US_TOPIC_0244854543__p3156172519506"><a name="EN-US_TOPIC_0244854543__li16156225145013"></a><a name="li16156225145013"></a><strong id="EN-US_TOPIC_0244854543__b181569250506">firewall-cmd --list-all</strong></p>
</li><li id="EN-US_TOPIC_0244854543__li6223134116501">Restart firewalld.<p id="EN-US_TOPIC_0244854543__p131561825185019"><a name="EN-US_TOPIC_0244854543__li6223134116501"></a><a name="li6223134116501"></a><strong id="EN-US_TOPIC_0244854543__b12156132565013">systemctl restart firewalld.service</strong></p>
</li></ol>
</li><li id="EN-US_TOPIC_0244854543__li1156142545018">Method 2: Disable the firewall and the function of automatically enabling the firewall upon ECS startup.<p id="EN-US_TOPIC_0244854543__p59831847125019"><a name="EN-US_TOPIC_0244854543__li1156142545018"></a><a name="li1156142545018"></a><strong id="EN-US_TOPIC_0244854543__b11983114714507">systemctl stop firewalld</strong></p>
<p id="EN-US_TOPIC_0244854543__p598320473502"><strong id="EN-US_TOPIC_0244854543__b1998316475503">systemctl disable firewalld</strong></p>
</li></ul>
</li><li id="EN-US_TOPIC_0244854543__li116893314015">Modify the security group rule.<p id="EN-US_TOPIC_0244854543__p480134704"><a name="EN-US_TOPIC_0244854543__li116893314015"></a><a name="li116893314015"></a>Add an inbound rule in which <strong id="EN-US_TOPIC_0244854543__b141211529104715">Protocol</strong> is set to <strong id="EN-US_TOPIC_0244854543__b201261629164715">TCP</strong> and <strong id="EN-US_TOPIC_0244854543__b112692934713">Port Range</strong> is set to <strong id="EN-US_TOPIC_0244854543__b2126102919473">2020</strong>.</p>
<p id="EN-US_TOPIC_0244854543__p16594263508">For details, see "Adding a Security Group Rule" in the <em id="EN-US_TOPIC_0244854543__i1012313422447">Virtual Private Cloud User Guide</em>.</p>
<p id="EN-US_TOPIC_0244854543__p1922417401298">Use port 2020 to remotely log in to the <span id="EN-US_TOPIC_0244854543__text192572479469">ECS</span>.</p>
</li><li id="EN-US_TOPIC_0244854543__li134401435341">Use "IP address:Port" to remotely access the ECS.</li></ol>
</div>
</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="en-us_topic_0030930807.html">Login and Connection</a></div>
</div>
</div>


<script language="JavaScript">
<!--
image_size('.imgResize');
var msg_imageMax = "view original image";
var msg_imageClose = "close";
//--></script>