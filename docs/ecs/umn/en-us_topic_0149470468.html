<a name="EN-US_TOPIC_0149470468"></a><a name="EN-US_TOPIC_0149470468"></a>

<h1 class="topictitle1">Installing a Tesla Driver and CUDA Toolkit on a GPU-accelerated ECS</h1>
<div id="body1547197748098"><div class="section" id="EN-US_TOPIC_0149470468__section11831857193910"><h4 class="sectiontitle">Scenarios</h4><p id="EN-US_TOPIC_0149470468__p140201516375">Before using a GPU-accelerated <span id="EN-US_TOPIC_0149470468__text1399974261016">ECS</span>, make sure that the desired Tesla driver and CUDA toolkit have been installed on the <span id="EN-US_TOPIC_0149470468__text1217719446344">ECS</span> for computing acceleration.</p>
<ul id="EN-US_TOPIC_0149470468__ul830755133918"><li id="EN-US_TOPIC_0149470468__li1162798819">A computing-accelerated (P series) ECS created using a Windows public image has had a Tesla driver of a specified version installed by default.</li><li id="EN-US_TOPIC_0149470468__li14903316131110">A computing-accelerated (P series) ECS created using a Linux public image does not have a Tesla driver installed by default. After the ECS is created, install a driver on it for computing acceleration.</li><li id="EN-US_TOPIC_0149470468__li03074520392">After a GPU-accelerated <span id="EN-US_TOPIC_0149470468__text4951148141018">ECS</span> is created using a private image, it must have a Tesla driver installed. Otherwise, computing acceleration will not take effect.</li></ul>
<p id="EN-US_TOPIC_0149470468__p5800357173918">This section describes how to install a Tesla driver and CUDA toolkit on a GPU-accelerated <span id="EN-US_TOPIC_0149470468__text1666151414351">ECS</span>.</p>
</div>
<div class="section" id="EN-US_TOPIC_0149470468__section14189185733910"><h4 class="sectiontitle">Notes</h4><ul id="EN-US_TOPIC_0149470468__ul8800115743919"><li id="EN-US_TOPIC_0149470468__li8800857143912">The target <span id="EN-US_TOPIC_0149470468__text207851015112">ECS</span> has an EIP bound.</li><li id="EN-US_TOPIC_0149470468__li15800175713392">The Tesla driver and CUDA toolkit have not been installed on the <span id="EN-US_TOPIC_0149470468__text1324711518115">ECS</span>.</li></ul>
<div class="note" id="EN-US_TOPIC_0149470468__note16193155763919"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul id="EN-US_TOPIC_0149470468__ul581241865218"><li id="EN-US_TOPIC_0149470468__li1481211814527">Download the CUDA toolkit from the official NVIDIA website and install it. A Tesla driver matching the CUDA version will be automatically installed then. However, if there are specific requirements or dependencies on the Tesla driver version, download the matching Tesla driver from the official NVIDIA website first and then install the driver before installing the CUDA toolkit.</li><li id="EN-US_TOPIC_0149470468__li1981251815215">If a Tesla driver has been installed on the <span id="EN-US_TOPIC_0149470468__text725314152113">ECS</span>, check the driver version. Before installing a new driver version, uninstall the original Tesla driver to prevent an installation failure due to driver conflicts.</li></ul>
</div></div>
</div>
<div class="p" id="EN-US_TOPIC_0149470468__p95655317249">Installation process:<ul id="EN-US_TOPIC_0149470468__ul88391838732"><li id="EN-US_TOPIC_0149470468__li12839193815320"><a href="en-us_topic_0213874991.html">Obtaining a Tesla Driver and CUDA Toolkit</a></li><li id="EN-US_TOPIC_0149470468__li5374103518173">Installing a Tesla Driver<ul id="EN-US_TOPIC_0149470468__ul185231748131719"><li id="EN-US_TOPIC_0149470468__li188398381232"><a href="#EN-US_TOPIC_0149470468__section1728514576397">Installing a Tesla Driver on a Linux ECS</a></li><li id="EN-US_TOPIC_0149470468__li283915381332"><a href="#EN-US_TOPIC_0149470468__section244363219171">Installing a Tesla Driver on a Windows ECS</a></li></ul>
</li><li id="EN-US_TOPIC_0149470468__li4780458131718">Installing a CUDA Toolkit<ul id="EN-US_TOPIC_0149470468__ul25381110185"><li id="EN-US_TOPIC_0149470468__li128395381314"><a href="#EN-US_TOPIC_0149470468__section1034245773916">Installing the CUDA Toolkit on a Linux ECS</a></li><li id="EN-US_TOPIC_0149470468__li198391038832"><a href="#EN-US_TOPIC_0149470468__section0337133719497">Installing the CUDA Toolkit on a Windows ECS</a></li></ul>
</li></ul>
</div>
<div class="section" id="EN-US_TOPIC_0149470468__section1728514576397"><a name="EN-US_TOPIC_0149470468__section1728514576397"></a><a name="section1728514576397"></a><h4 class="sectiontitle">Installing a Tesla Driver on a Linux <span id="EN-US_TOPIC_0149470468__text1644519213119">ECS</span></h4><p id="EN-US_TOPIC_0149470468__p448157174814">The following uses Ubuntu 16.04 64bit as an example to describe how to install the Tesla driver matching CUDA 10.1 on a GPU-accelerated ECS.</p>
<div class="note" id="EN-US_TOPIC_0149470468__note4142104813498"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TOPIC_0149470468__p11143848184917">The Linux kernel version is compatible with the driver version. If installing the driver failed, check the driver installation log, which is generally stored in <strong id="EN-US_TOPIC_0149470468__b842352706103414">/var/log/nvidia-installer.log</strong>. If the log shows that the failure was caused by a driver compilation error, for example, the <strong id="EN-US_TOPIC_0149470468__b84235270610354">get_user_pages</strong> parameter setting is incorrect, the kernel version is incompatible with the driver version. In such a case, select the desired kernel version and driver version and reinstall them. It is recommended that the release time of the kernel version and driver version be the same.</p>
</div></div>
<ol id="EN-US_TOPIC_0149470468__ol0817135712396"><li id="EN-US_TOPIC_0149470468__li1281745718397">Log in to the <span id="EN-US_TOPIC_0149470468__text5776113213711">ECS</span>.</li><li id="EN-US_TOPIC_0149470468__li158171957153910">Update the system software based on the OS.<ul id="EN-US_TOPIC_0149470468__ul881755714394"><li id="EN-US_TOPIC_0149470468__li281775710396">Ubuntu<p id="EN-US_TOPIC_0149470468__p1181755714398"><a name="EN-US_TOPIC_0149470468__li281775710396"></a><a name="li281775710396"></a>Update the software installation source: <strong id="EN-US_TOPIC_0149470468__b340087014103730">apt-get -y update</strong></p>
<p id="EN-US_TOPIC_0149470468__p208177573399">Install necessary programs: <strong id="EN-US_TOPIC_0149470468__b1171239680103740">apt-get install gcc g++ make</strong></p>
</li><li id="EN-US_TOPIC_0149470468__li58171057133914">CentOS<p id="EN-US_TOPIC_0149470468__p138171157153911"><a name="EN-US_TOPIC_0149470468__li58171057133914"></a><a name="li58171057133914"></a>Update the software installation source: <strong id="EN-US_TOPIC_0149470468__b74423133210377">yum -y update --exclude=kernel* --exclude=centos-release* --exclude=initscripts*</strong></p>
<p id="EN-US_TOPIC_0149470468__p1844012187318">Install the desired program: <strong id="EN-US_TOPIC_0149470468__b1613125310111">yum install -y kernel-devel-`uname -r` gcc gcc-c++</strong></p>
</li></ul>
</li><li id="EN-US_TOPIC_0149470468__li4817457193917">Download the NVIDIA driver package.<p id="EN-US_TOPIC_0149470468__p138171157123914"><a name="EN-US_TOPIC_0149470468__li4817457193917"></a><a name="li4817457193917"></a>Select a driver version at <a href="https://www.nvidia.com/Download/index.aspx?lang=en-us" target="_blank" rel="noopener noreferrer">NVIDIA Driver Downloads</a> based on the ECS type. Click <strong id="EN-US_TOPIC_0149470468__b414997201418">SEARCH</strong>.</p>
<div class="fignone" id="EN-US_TOPIC_0149470468__fig545554125711"><span class="figcap"><b>Figure 1 </b>Selecting a NVIDIA driver version</span><br><span><img id="EN-US_TOPIC_0149470468__image134221231143312" src="en-us_image_0234354896.png" title="Click to enlarge" class="imgResize"></span></div>
</li><li id="EN-US_TOPIC_0149470468__li11742044142716">Select a driver version as required. The following uses Tesla 418.67 as an example.<div class="fignone" id="EN-US_TOPIC_0149470468__fig52351103310"><span class="figcap"><b>Figure 2 </b>Selecting a driver version</span><br><span><img id="EN-US_TOPIC_0149470468__image73195163315" src="en-us_image_0234354931.png" title="Click to enlarge" class="imgResize"></span></div>
</li><li id="EN-US_TOPIC_0149470468__li713172665816">Click the driver to be downloaded. On the <strong id="EN-US_TOPIC_0149470468__b144094131151">TESLA DRIVER FOR LINUX X64</strong> page that is displayed, click <strong id="EN-US_TOPIC_0149470468__b17162219151511">DOWNLOAD</strong>.</li><li id="EN-US_TOPIC_0149470468__li126191531724">Copy the download link.<div class="fignone" id="EN-US_TOPIC_0149470468__fig123801538205720"><span class="figcap"><b>Figure 3 </b>Copying the download link</span><br><span><img id="EN-US_TOPIC_0149470468__image94414116363" src="en-us_image_0234355284.png" title="Click to enlarge" class="imgResize"></span></div>
</li><li id="EN-US_TOPIC_0149470468__li207092513314">Run the following command on the <span id="EN-US_TOPIC_0149470468__text683823251115">ECS</span> to download the driver:<p id="EN-US_TOPIC_0149470468__p69610224146"><strong id="EN-US_TOPIC_0149470468__b344761812104326">wget </strong><em id="EN-US_TOPIC_0149470468__i842352697204719">Copied link</em></p>
<p id="EN-US_TOPIC_0149470468__p18729204149">For example, <strong id="EN-US_TOPIC_0149470468__b11710101482919">wget http://us.download.nvidia.com/tesla/418.67/NVIDIA-Linux-x86_64-418.67.run</strong></p>
<div class="fignone" id="EN-US_TOPIC_0149470468__fig187219205141"><span class="figcap"><b>Figure 4 </b>Obtaining the installation package</span><br><span><img id="EN-US_TOPIC_0149470468__image4449153613362" src="en-us_image_0234355299.png" title="Click to enlarge" class="imgResize"></span></div>
</li><li id="EN-US_TOPIC_0149470468__li1681715763920">Run the following command to install the driver:<p id="EN-US_TOPIC_0149470468__p10817205713391"><a name="EN-US_TOPIC_0149470468__li1681715763920"></a><a name="li1681715763920"></a><strong id="EN-US_TOPIC_0149470468__b161283919298">sh NVIDIA-Linux-x86_64-418.67.run</strong></p>
</li><li id="EN-US_TOPIC_0149470468__li71661422070">(Optional) If the following information is displayed after the command for installing the driver is executed, disable the Nouveau driver.<div class="fignone" id="EN-US_TOPIC_0149470468__fig2682182345814"><span class="figcap"><b>Figure 5 </b>Disabling the Nouveau driver</span><br><span><img id="EN-US_TOPIC_0149470468__image114742526557" src="en-us_image_0250287387.png" title="Click to enlarge" class="imgResize"></span></div>
<ol type="a" id="EN-US_TOPIC_0149470468__ol495214571193"><li id="EN-US_TOPIC_0149470468__li15166621978">Run the following command to check whether the Nouveau driver has been installed:<p id="EN-US_TOPIC_0149470468__p171665215712"><a name="EN-US_TOPIC_0149470468__li15166621978"></a><a name="li15166621978"></a><strong id="EN-US_TOPIC_0149470468__b71661021673">lsmod | grep nouveau</strong></p>
<ul id="EN-US_TOPIC_0149470468__ul1616682578"><li id="EN-US_TOPIC_0149470468__li1516615217713">If the command output contains information about the Nouveau driver, the Nouveau driver has been installed and must be disabled. Then, go to step <a href="#EN-US_TOPIC_0149470468__li073251517124">9.b</a>.</li><li id="EN-US_TOPIC_0149470468__li9166120717">If the command output does not contain information about the Nouveau driver, the Nouveau driver has been disabled. Then, go to step <a href="#EN-US_TOPIC_0149470468__li9819105753916">9.d</a>.</li></ul>
</li><li id="EN-US_TOPIC_0149470468__li073251517124"><a name="EN-US_TOPIC_0149470468__li073251517124"></a><a name="li073251517124"></a>Edit the <strong id="EN-US_TOPIC_0149470468__b842352706235950">blacklist.conf</strong> file.<p id="EN-US_TOPIC_0149470468__p10350125181311">If the <strong id="EN-US_TOPIC_0149470468__b76971338153218">/etc/modprobe.d/blacklist.conf</strong> file is unavailable, create it.</p>
<p id="EN-US_TOPIC_0149470468__p3358122221314"><strong id="EN-US_TOPIC_0149470468__b435852214132">vi /etc/modprobe.d/blacklist.conf</strong></p>
<p id="EN-US_TOPIC_0149470468__p535813221136">Add the following statement to the end of the file:</p>
<pre class="screen" id="EN-US_TOPIC_0149470468__screen935818223139">blacklist nouveau
options nouveau modeset=0</pre>
</li></ol><ol type="a" start="3" id="EN-US_TOPIC_0149470468__ol181965773913"><li id="EN-US_TOPIC_0149470468__li20819175712394">Run the following command to back up and create an initramfs application:<ul id="EN-US_TOPIC_0149470468__ul8475377141"><li id="EN-US_TOPIC_0149470468__li16801114217148">Ubuntu<p id="EN-US_TOPIC_0149470468__p113607446147"><a name="EN-US_TOPIC_0149470468__li16801114217148"></a><a name="li16801114217148"></a><strong id="EN-US_TOPIC_0149470468__b681975713393">sudo update-initramfs -u</strong></p>
</li><li id="EN-US_TOPIC_0149470468__li64763741416">CentOS:<p id="EN-US_TOPIC_0149470468__p206098240143"><a name="EN-US_TOPIC_0149470468__li64763741416"></a><a name="li64763741416"></a><strong id="EN-US_TOPIC_0149470468__b168199571394">mv /boot/initramfs-$(uname -r).img /boot/initramfs-$(uname -r).img.bak</strong></p>
<p id="EN-US_TOPIC_0149470468__p135421725191415"><strong id="EN-US_TOPIC_0149470468__b18191357153918">dracut -v /boot/initramfs-$(uname -r).img $(uname -r)</strong></p>
</li></ul>
</li></ol><ol type="a" start="4" id="EN-US_TOPIC_0149470468__ol16819057103913"><li id="EN-US_TOPIC_0149470468__li9819105753916"><a name="EN-US_TOPIC_0149470468__li9819105753916"></a><a name="li9819105753916"></a>Restart the <span id="EN-US_TOPIC_0149470468__text63058583375">ECS</span>:<p id="EN-US_TOPIC_0149470468__p10364155851416"><strong id="EN-US_TOPIC_0149470468__b14819175718395">reboot</strong></p>
</li></ol>
</li><li id="EN-US_TOPIC_0149470468__li1516433810618">Select <strong id="EN-US_TOPIC_0149470468__b842352706104838">OK</strong> for three consecutive times as prompted to complete the driver installation.<div class="fignone" id="EN-US_TOPIC_0149470468__fig1643713142594"><span class="figcap"><b>Figure 6 </b>Completing the NVIDIA driver installation</span><br><span><img id="EN-US_TOPIC_0149470468__image18770191219561" src="en-us_image_0250287611.png" title="Click to enlarge" class="imgResize"></span></div>
</li><li id="EN-US_TOPIC_0149470468__li3582134411611">Run the following command to set systemd:<p id="EN-US_TOPIC_0149470468__p1257716149716"><a name="EN-US_TOPIC_0149470468__li3582134411611"></a><a name="li3582134411611"></a><strong id="EN-US_TOPIC_0149470468__b16179838866">systemctl set-default multi-user.target</strong></p>
</li><li id="EN-US_TOPIC_0149470468__li17271743865">Run the <strong id="EN-US_TOPIC_0149470468__b18312818271">reboot</strong> command to restart the <span id="EN-US_TOPIC_0149470468__text94301943171116">ECS</span>.</li><li id="EN-US_TOPIC_0149470468__li627117437618">Log in to the <span id="EN-US_TOPIC_0149470468__text53821747201115">ECS</span> and run the <strong id="EN-US_TOPIC_0149470468__b139061138473">nvidia-smi</strong> command. If the command output contains the installed driver version, the driver has been installed.<div class="fignone" id="EN-US_TOPIC_0149470468__fig61971535809"><span class="figcap"><b>Figure 7 </b>Viewing the NVIDIA driver version</span><br><span><img id="EN-US_TOPIC_0149470468__image169252712371" src="en-us_image_0234355305.png" title="Click to enlarge" class="imgResize"></span></div>
</li></ol>
</div>
<div class="section" id="EN-US_TOPIC_0149470468__section244363219171"><a name="EN-US_TOPIC_0149470468__section244363219171"></a><a name="section244363219171"></a><h4 class="sectiontitle">Installing a Tesla Driver on a Windows <span id="EN-US_TOPIC_0149470468__text19911017173912">ECS</span></h4><p id="EN-US_TOPIC_0149470468__p14571105414189">The following uses Windows Server 2016 Standard 64bit as an example to describe how to install a Tesla driver on a GPU-accelerated ECS.</p>
<ol id="EN-US_TOPIC_0149470468__ol281965711396"><li id="EN-US_TOPIC_0149470468__li1819185714392">Log in to the <span id="EN-US_TOPIC_0149470468__text11254183518392">ECS</span>.</li><li id="EN-US_TOPIC_0149470468__li1884514453019">Download the NVIDIA driver package.<p id="EN-US_TOPIC_0149470468__p138456463016"><a name="EN-US_TOPIC_0149470468__li1884514453019"></a><a name="li1884514453019"></a>Select a driver version at <a href="https://www.nvidia.com/Download/index.aspx?lang=en-us" target="_blank" rel="noopener noreferrer">NVIDIA Driver Downloads</a> based on the ECS type.</p>
<div class="fignone" id="EN-US_TOPIC_0149470468__fig62897581106"><span class="figcap"><b>Figure 8 </b>Selecting a driver type (Windows)</span><br><span><img id="EN-US_TOPIC_0149470468__image5572108144817" src="en-us_image_0234356929.png" title="Click to enlarge" class="imgResize"></span></div>
</li><li id="EN-US_TOPIC_0149470468__li779933211405">Select a driver version as required. The following uses Tesla 425.25 as an example.<div class="fignone" id="EN-US_TOPIC_0149470468__fig5291626204819"><span class="figcap"><b>Figure 9 </b>Selecting a driver version (Windows)</span><br><span><img id="EN-US_TOPIC_0149470468__image02992620489" src="en-us_image_0234356990.png" title="Click to enlarge" class="imgResize"></span></div>
</li><li id="EN-US_TOPIC_0149470468__li1994719159331">Click the driver to be downloaded. On the <strong id="EN-US_TOPIC_0149470468__b1525820422207">TESLA DRIVER FOR WINDOWS</strong> page that is displayed, click <strong id="EN-US_TOPIC_0149470468__b226410421205">DOWNLOAD</strong>.</li><li id="EN-US_TOPIC_0149470468__li394871513334">Click <strong id="EN-US_TOPIC_0149470468__b842352706105415">Agree &amp; Download</strong> to download the installation package.<div class="fignone" id="EN-US_TOPIC_0149470468__fig37451434818"><span class="figcap"><b>Figure 10 </b>Downloading the driver installation package</span><br><span><img id="EN-US_TOPIC_0149470468__image17234918497" src="en-us_image_0234357031.png" title="Click to enlarge" class="imgResize"></span></div>
</li><li id="EN-US_TOPIC_0149470468__li182225714393">Double-click the driver and click <strong id="EN-US_TOPIC_0149470468__b842352706105559">Run</strong>.<div class="fignone" id="EN-US_TOPIC_0149470468__fig177611624821"><span class="figcap"><b>Figure 11 </b>Running the NVIDIA driver installation program</span><br><span><img id="EN-US_TOPIC_0149470468__image56681375020" src="en-us_image_0234357053.png" title="Click to enlarge" class="imgResize"></span></div>
</li><li id="EN-US_TOPIC_0149470468__li1182220578398">Select an installation path and click <strong id="EN-US_TOPIC_0149470468__b659837436105644">OK</strong>.<div class="fignone" id="EN-US_TOPIC_0149470468__fig1378440121"><span class="figcap"><b>Figure 12 </b>Selecting an installation path</span><br><span><img id="EN-US_TOPIC_0149470468__image1530178105417" src="en-us_image_0234357336.png" title="Click to enlarge" class="imgResize"></span></div>
</li><li id="EN-US_TOPIC_0149470468__li2431514164115">Install the NVIDIA program as prompted.<div class="fignone" id="EN-US_TOPIC_0149470468__fig46181053128"><span class="figcap"><b>Figure 13 </b>Completing the driver installation</span><br><span><img id="EN-US_TOPIC_0149470468__image7395121185414" src="en-us_image_0234357355.png" title="Click to enlarge" class="imgResize"></span></div>
</li><li id="EN-US_TOPIC_0149470468__li14823125783915">Restart the <span id="EN-US_TOPIC_0149470468__text18462173171215">ECS</span>.</li><li id="EN-US_TOPIC_0149470468__li1782318576397">Check whether the NVIDIA driver has been installed.<ol type="a" id="EN-US_TOPIC_0149470468__ol981174419116"><li id="EN-US_TOPIC_0149470468__li158113444116">Switch to <strong id="EN-US_TOPIC_0149470468__b842352706105752">Device Manager</strong> and click <strong id="EN-US_TOPIC_0149470468__b84235270610589">Display adapters</strong>.<div class="fignone" id="EN-US_TOPIC_0149470468__fig8540781030"><span class="figcap"><b>Figure 14 </b>Display adapters</span><br><span><img id="EN-US_TOPIC_0149470468__image1318697205516" src="en-us_image_0234357385.png" title="Click to enlarge" class="imgResize"></span></div>
</li></ol><ol type="a" start="2" id="EN-US_TOPIC_0149470468__ol8811448117"><li id="EN-US_TOPIC_0149470468__li68076211471">Open the <strong id="EN-US_TOPIC_0149470468__b56929528591">cmd</strong> window on the <span id="EN-US_TOPIC_0149470468__text18320941213">ECS</span> and run the following commands:<p id="EN-US_TOPIC_0149470468__p166649543470"><strong id="EN-US_TOPIC_0149470468__b81991522481">cd C:\Program Files\NVIDIA Corporation\NVSMI</strong></p>
<p id="EN-US_TOPIC_0149470468__p275016519478"><strong id="EN-US_TOPIC_0149470468__b082320576398">nvidia-smi</strong></p>
<p id="EN-US_TOPIC_0149470468__p12136174204817">If the command output contains the installed driver version, the driver has been installed.</p>
<div class="fignone" id="EN-US_TOPIC_0149470468__fig125251621439"><span class="figcap"><b>Figure 15 </b>Viewing the NVIDIA driver version</span><br><span><img id="EN-US_TOPIC_0149470468__image714222185512" src="en-us_image_0234357365.png" title="Click to enlarge" class="imgResize"></span></div>
</li></ol>
</li></ol>
</div>
<div class="section" id="EN-US_TOPIC_0149470468__section1034245773916"><a name="EN-US_TOPIC_0149470468__section1034245773916"></a><a name="section1034245773916"></a><h4 class="sectiontitle">Installing the CUDA Toolkit on a Linux ECS</h4><p id="EN-US_TOPIC_0149470468__p18178144519315">The following uses Ubuntu 16.04 64bit as an example to describe how to install the CUDA 10.1 toolkit on a GPU-accelerated ECS.</p>
<ol id="EN-US_TOPIC_0149470468__ol1824057143911"><li id="EN-US_TOPIC_0149470468__li12824115753918">Log in to the <span id="EN-US_TOPIC_0149470468__text79691813134014">ECS</span>.</li><li id="EN-US_TOPIC_0149470468__li0299112411101">Update the system software based on the OS.<ul id="EN-US_TOPIC_0149470468__ul1229912247102"><li id="EN-US_TOPIC_0149470468__li10299182413102">Ubuntu<p id="EN-US_TOPIC_0149470468__p1929922411103"><a name="EN-US_TOPIC_0149470468__li10299182413102"></a><a name="li10299182413102"></a>Update the software installation source: <strong id="EN-US_TOPIC_0149470468__b119643499">apt-get -y update</strong></p>
<p id="EN-US_TOPIC_0149470468__p1229912242106">Install necessary programs: <strong id="EN-US_TOPIC_0149470468__b164291591">apt-get install gcc g++ make</strong></p>
</li><li id="EN-US_TOPIC_0149470468__li42991124181013">CentOS<p id="EN-US_TOPIC_0149470468__p42999249106"><a name="EN-US_TOPIC_0149470468__li42991124181013"></a><a name="li42991124181013"></a>Update the software installation source: <strong id="EN-US_TOPIC_0149470468__b2057003677">yum -y update --exclude=kernel* --exclude=centos-release* --exclude=initscripts*</strong></p>
<p id="EN-US_TOPIC_0149470468__p10299152421015">Install the desired program: <strong id="EN-US_TOPIC_0149470468__b5514123971014">yum install -y kernel-devel-`uname -r` gcc gcc-c++</strong></p>
</li></ul>
</li><li id="EN-US_TOPIC_0149470468__li882465713396">On the CUDA download page, set parameters according to the information shown in <a href="en-us_topic_0213874991.html">Obtaining a Tesla Driver and CUDA Toolkit</a>.<div class="fignone" id="EN-US_TOPIC_0149470468__fig1930101643513"><span class="figcap"><b>Figure 16 </b>Selecting a CUDA version</span><br><span><img id="EN-US_TOPIC_0149470468__image1580714215591" src="en-us_image_0250288087.png" title="Click to enlarge" class="imgResize"></span></div>
</li><li id="EN-US_TOPIC_0149470468__li1782595793917">Find the link for downloading CUDA 10.1 and copy the link.<div class="fignone" id="EN-US_TOPIC_0149470468__fig970482862918"><span class="figcap"><b>Figure 17 </b>Copying the link for downloading CUDA</span><br><span><img id="EN-US_TOPIC_0149470468__image11142438843" src="en-us_image_0250288474.png" title="Click to enlarge" class="imgResize"></span></div>
</li></ol><ol start="5" id="EN-US_TOPIC_0149470468__ol1636910373464"><li id="EN-US_TOPIC_0149470468__li3195133918464">Run the following command on the <span id="EN-US_TOPIC_0149470468__text641512394020">ECS</span> to download CUDA:<p id="EN-US_TOPIC_0149470468__p191959392460"><strong id="EN-US_TOPIC_0149470468__b1035270556">wget </strong><em id="EN-US_TOPIC_0149470468__i1568982506">Copied link</em></p>
<p id="EN-US_TOPIC_0149470468__p19195439104619">For example, <strong id="EN-US_TOPIC_0149470468__b119041673711342">wget https://developer.nvidia.com/compute/cuda/10.1/Prod/local_installers/cuda_10.1.105_418.39_linux.run</strong></p>
<div class="fignone" id="EN-US_TOPIC_0149470468__fig8354143184612"><span class="figcap"><b>Figure 18 </b>Downloading CUDA</span><br><span><img id="EN-US_TOPIC_0149470468__image18604954660" src="en-us_image_0234358619.png" title="Click to enlarge" class="imgResize"></span></div>
</li></ol><ol start="6" id="EN-US_TOPIC_0149470468__ol082565763914"><li id="EN-US_TOPIC_0149470468__li188272570394">Install CUDA.<div class="p" id="EN-US_TOPIC_0149470468__p42101851184818"><a name="EN-US_TOPIC_0149470468__li188272570394"></a><a name="li188272570394"></a>Follow the instructions provided on the official NVIDIA website.<div class="fignone" id="EN-US_TOPIC_0149470468__fig11827757103913"><span class="figcap"><b>Figure 19 </b>Installing CUDA</span><br><span><img id="EN-US_TOPIC_0149470468__image1273413508219" src="en-us_image_0250288371.png" title="Click to enlarge" class="imgResize"></span></div>
</div>
</li><li id="EN-US_TOPIC_0149470468__li14815907523">Run the following command to install CUDA:<p id="EN-US_TOPIC_0149470468__p58265019529"><a name="EN-US_TOPIC_0149470468__li14815907523"></a><a name="li14815907523"></a><strong id="EN-US_TOPIC_0149470468__b2082620105212">sh cuda_10.1.243_418.87.00_linux.run</strong></p>
</li><li id="EN-US_TOPIC_0149470468__li158771333526">Select <strong id="EN-US_TOPIC_0149470468__b84235270611711">accept</strong> on the installation page and press <strong id="EN-US_TOPIC_0149470468__b84235270611725">Enter</strong>.<div class="fignone" id="EN-US_TOPIC_0149470468__fig514958145414"><span class="figcap"><b>Figure 20 </b>Installing CUDA_1</span><br><span><img id="EN-US_TOPIC_0149470468__image45988191571" src="en-us_image_0234358634.png" title="Click to enlarge" class="imgResize"></span></div>
</li><li id="EN-US_TOPIC_0149470468__li0859106165217">Select <strong id="EN-US_TOPIC_0149470468__b84235270611743">Install</strong> and press <strong id="EN-US_TOPIC_0149470468__b84235270611747">Enter</strong> to start the installation.<div class="fignone" id="EN-US_TOPIC_0149470468__fig20943181255411"><span class="figcap"><b>Figure 21 </b>Installing CUDA_2</span><br><span><img id="EN-US_TOPIC_0149470468__image217192912714" src="en-us_image_0234358642.png" title="Click to enlarge" class="imgResize"></span></div>
<div class="fignone" id="EN-US_TOPIC_0149470468__fig148915619526"><span class="figcap"><b>Figure 22 </b>Completing the installation</span><br><span><img id="EN-US_TOPIC_0149470468__image148311539674" src="en-us_image_0234358704.png" title="Click to enlarge" class="imgResize"></span></div>
</li><li id="EN-US_TOPIC_0149470468__li382875715396">Run the following command to switch to <strong id="EN-US_TOPIC_0149470468__b84235270618246">/usr/local/cuda-10.1/samples/1_Utilities/deviceQuery</strong>:<p id="EN-US_TOPIC_0149470468__p782810579391"><strong id="EN-US_TOPIC_0149470468__b108281557173913">cd /usr/local/cuda-10.1/samples/1_Utilities/deviceQuery</strong></p>
</li><li id="EN-US_TOPIC_0149470468__li78288577390">Run the <strong id="EN-US_TOPIC_0149470468__b2124316848182420">make</strong> command to automatically compile the deviceQuery program.</li><li id="EN-US_TOPIC_0149470468__li42666198585">Run the following command to check whether CUDA has been installed:<p id="EN-US_TOPIC_0149470468__p84782513581"><a name="EN-US_TOPIC_0149470468__li42666198585"></a><a name="li42666198585"></a><strong id="EN-US_TOPIC_0149470468__b10828115703915">./deviceQuery</strong></p>
<p id="EN-US_TOPIC_0149470468__p8828757193919">If the command output contains the CUDA version, CUDA has been installed.</p>
<div class="fignone" id="EN-US_TOPIC_0149470468__fig1282815711392"><span class="figcap"><b>Figure 23 </b>deviceQuery common output</span><br><span><img id="EN-US_TOPIC_0149470468__image4526185214714" src="en-us_image_0234358719.png" title="Click to enlarge" class="imgResize"></span></div>
</li><li id="EN-US_TOPIC_0149470468__li491295865920">Check the CUDA version.<p id="EN-US_TOPIC_0149470468__p57949109017"><a name="EN-US_TOPIC_0149470468__li491295865920"></a><a name="li491295865920"></a><strong id="EN-US_TOPIC_0149470468__b14261155714597">/usr/local/cuda/bin/nvcc -V</strong></p>
<div class="fignone" id="EN-US_TOPIC_0149470468__fig18749997817"><span class="figcap"><b>Figure 24 </b>Checking the CUDA version</span><br><span><img id="EN-US_TOPIC_0149470468__image10750129188" src="en-us_image_0234358804.png" title="Click to enlarge" class="imgResize"></span></div>
</li><li id="EN-US_TOPIC_0149470468__li18828145719392">Run the following command to enable the persistent mode:<p id="EN-US_TOPIC_0149470468__p28281757103911"><a name="EN-US_TOPIC_0149470468__li18828145719392"></a><a name="li18828145719392"></a><strong id="EN-US_TOPIC_0149470468__b1893542512159">sudo nvidia-smi -pm 1</strong></p>
<p id="EN-US_TOPIC_0149470468__p1782875713919">Enabling the persistent mode optimizes the GPU performance on Linux ECSs.</p>
</li></ol>
</div>
<div class="section" id="EN-US_TOPIC_0149470468__section0337133719497"><a name="EN-US_TOPIC_0149470468__section0337133719497"></a><a name="section0337133719497"></a><h4 class="sectiontitle">Installing the CUDA Toolkit on a Windows ECS</h4><p id="EN-US_TOPIC_0149470468__p141816373491">The following uses Windows Server 2016 Standard 64bit as an example to describe how to install the CUDA 10.1 toolkit on a GPU-accelerated ECS.</p>
<ol id="EN-US_TOPIC_0149470468__ol104201137114914"><li id="EN-US_TOPIC_0149470468__li3419837144910">Log in to the <span id="EN-US_TOPIC_0149470468__text173011640154113">ECS</span>.</li><li id="EN-US_TOPIC_0149470468__li0988563316">On the CUDA download page, set parameters according to the information shown in <a href="en-us_topic_0213874991.html#EN-US_TOPIC_0213874991__section10203125783920">Downloading a CUDA Toolkit</a>.<div class="fignone" id="EN-US_TOPIC_0149470468__fig17127316719"><span class="figcap"><b>Figure 25 </b>Selecting a CUDA version</span><br><span><img id="EN-US_TOPIC_0149470468__image10605256396" src="en-us_image_0250288895.png" title="Click to enlarge" class="imgResize"></span></div>
</li><li id="EN-US_TOPIC_0149470468__li194191137154914">Find the link for downloading CUDA 10.1.<div class="fignone" id="EN-US_TOPIC_0149470468__fig22798411673"><span class="figcap"><b>Figure 26 </b>Finding the link for downloading CUDA</span><br><span><img id="EN-US_TOPIC_0149470468__image205035091111" src="en-us_image_0250289123.png" title="Click to enlarge" class="imgResize"></span></div>
</li><li id="EN-US_TOPIC_0149470468__li541917374494">Click <strong id="EN-US_TOPIC_0149470468__b842352706112739">Download</strong> to download the CUDA toolkit.</li><li id="EN-US_TOPIC_0149470468__li3420737174920">Double-click the installation file and click <strong id="EN-US_TOPIC_0149470468__b842352706112810">Run</strong> to install the CUDA toolkit.<div class="fignone" id="EN-US_TOPIC_0149470468__fig696324171118"><span class="figcap"><b>Figure 27 </b>Installing CUDA</span><br><span><img id="EN-US_TOPIC_0149470468__image1537412862315" src="en-us_image_0234360248.png"></span></div>
</li><li id="EN-US_TOPIC_0149470468__li1284918311219">On the <strong id="EN-US_TOPIC_0149470468__b84235270611291">CUDA Setup Package</strong> page, select an installation path and click <strong id="EN-US_TOPIC_0149470468__b842352706112911">OK</strong>.<div class="fignone" id="EN-US_TOPIC_0149470468__fig18644103851215"><span class="figcap"><b>Figure 28 </b>Selecting an installation path</span><br><span><img id="EN-US_TOPIC_0149470468__image204032037192314" src="en-us_image_0234360274.png" title="Click to enlarge" class="imgResize"></span></div>
</li><li id="EN-US_TOPIC_0149470468__li453818124169">Install the CUDA toolkit as prompted.<div class="fignone" id="EN-US_TOPIC_0149470468__fig2266175711165"><span class="figcap"><b>Figure 29 </b>Completing the installation</span><br><span><img id="EN-US_TOPIC_0149470468__image135771846102315" src="en-us_image_0234360255.png" title="Click to enlarge" class="imgResize"></span></div>
</li></ol><ol start="8" id="EN-US_TOPIC_0149470468__ol8421123794916"><li id="EN-US_TOPIC_0149470468__li1942173714912">Check whether CUDA has been installed<p id="EN-US_TOPIC_0149470468__p1041119254181"><a name="EN-US_TOPIC_0149470468__li1942173714912"></a><a name="li1942173714912"></a>Open the <strong id="EN-US_TOPIC_0149470468__b144912117013">cmd</strong> window and run the following command:</p>
<p id="EN-US_TOPIC_0149470468__p15596122816189"><strong id="EN-US_TOPIC_0149470468__b1259682871815">nvcc -V</strong></p>
<p id="EN-US_TOPIC_0149470468__p6532144191711">If the command output contains the CUDA version, CUDA has been installed.</p>
<div class="fignone" id="EN-US_TOPIC_0149470468__fig6475101453"><span class="figcap"><b>Figure 30 </b>Successful installation</span><br><span><img id="EN-US_TOPIC_0149470468__image13201165712312" src="en-us_image_0234360293.png"></span></div>
</li></ol>
</div>
</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="en-us_topic_0133513874.html">(Optional) Installing a Driver and Toolkit</a></div>
</div>
</div>


<script language="JavaScript">
<!--
image_size('.imgResize');
var msg_imageMax = "view original image";
var msg_imageClose = "close";
//--></script>