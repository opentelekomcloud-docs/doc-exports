<a name="EN-US_TOPIC_0021427650"></a><a name="EN-US_TOPIC_0021427650"></a>

<h1 class="topictitle1">Resetting the Password for Logging In to a Linux <span id="text1081995211543">ECS</span></h1>
<div id="body1446517288090"><div class="section" id="EN-US_TOPIC_0021427650__section17131859112916"><h4 class="sectiontitle">Scenarios</h4><p id="EN-US_TOPIC_0021427650__en-us_topic_0021426802_p557120821469">Keep your password secure. Reset the password if:</p>
<ul id="EN-US_TOPIC_0021427650__en-us_topic_0021426802_ul31424087214650"><li id="EN-US_TOPIC_0021427650__en-us_topic_0021426802_li58960965214655">The password is forgotten.</li><li id="EN-US_TOPIC_0021427650__en-us_topic_0021426802_li1617885210014">The password has expired.</li></ul>
<p id="EN-US_TOPIC_0021427650__en-us_topic_0021426802_p58571173516">This section describes how to reset the password of user <strong id="EN-US_TOPIC_0021427650__b48217366535">root</strong>. After resetting the password, you can log in to the <span id="EN-US_TOPIC_0021427650__text11829143615537">ECS</span>, and change the private key or reset the password of a non-<strong id="EN-US_TOPIC_0021427650__b1283053615310">root</strong> user.</p>
</div>
<div class="section" id="EN-US_TOPIC_0021427650__section35515688202027"><h4 class="sectiontitle">Prerequisites</h4><ul id="EN-US_TOPIC_0021427650__ul8978161204218"><li id="EN-US_TOPIC_0021427650__li26258204218">A temporary Linux <span id="EN-US_TOPIC_0021427650__text73281216216">ECS</span> which locates in the same AZ as the target <span id="EN-US_TOPIC_0021427650__text14544125623011">ECS</span> is available.</li><li id="EN-US_TOPIC_0021427650__li105056120442">You have bound an <span id="EN-US_TOPIC_0021427650__text1834017561469">EIP</span> to the temporary <span id="EN-US_TOPIC_0021427650__text120075192120">ECS</span>.</li></ul>
</div>
<div class="section" id="EN-US_TOPIC_0021427650__section9546131644416"><h4 class="sectiontitle">Procedure</h4><ol id="EN-US_TOPIC_0021427650__ol9263272585"><li id="EN-US_TOPIC_0021427650__li142662745818">Download the script for resetting the password and upload the script to the temporary <span id="EN-US_TOPIC_0021427650__text98881529183210">ECS</span>.<p id="EN-US_TOPIC_0021427650__p168479072216">Contact customer service to obtain the password reset script. Use a connection tool, such as WinSCP, to upload the obtained <strong id="EN-US_TOPIC_0021427650__b17949226145615">changepasswd.sh</strong> script to the temporary <span id="EN-US_TOPIC_0021427650__text19295192804516">ECS</span>.</p>
<p id="EN-US_TOPIC_0021427650__p168471003221">To download WinSCP, log in at <a href="https://winscp.net/" target="_blank" rel="noopener noreferrer">https://winscp.net/</a>.</p>
</li><li id="EN-US_TOPIC_0021427650__li19814359584"><a name="EN-US_TOPIC_0021427650__li19814359584"></a><a name="li19814359584"></a>Stop the original Linux <span id="EN-US_TOPIC_0021427650__text1479213752113">ECS</span>, detach the system disk from it, and attach the system disk to the temporary <span id="EN-US_TOPIC_0021427650__text184631512123311">ECS</span>.<ol type="a" id="EN-US_TOPIC_0021427650__ol1364041616443"><li id="EN-US_TOPIC_0021427650__li1864081674412">Stop the original ECS, switch to the page providing details about the ECS, and click the <strong id="EN-US_TOPIC_0021427650__b670417185202">Disks</strong> tab.<div class="note" id="EN-US_TOPIC_0021427650__note9640151617444"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TOPIC_0021427650__p18640131619443">Do not forcibly stop the original <span id="EN-US_TOPIC_0021427650__text117221691211">ECS</span>. Otherwise, password reset may fail.</p>
</div></div>
</li><li id="EN-US_TOPIC_0021427650__li5640121684418"><a name="EN-US_TOPIC_0021427650__li5640121684418"></a><a name="li5640121684418"></a>Locate the row containing the system disk to be detached and click <strong id="EN-US_TOPIC_0021427650__b12274302104828">Detach</strong> to detach the system disk from the ECS.</li><li id="EN-US_TOPIC_0021427650__li7640161614443">On the page providing details about the temporary <span id="EN-US_TOPIC_0021427650__text1769813125342">ECS</span>, click the <strong id="EN-US_TOPIC_0021427650__b137031612123415">Disks</strong> tab.</li><li id="EN-US_TOPIC_0021427650__li10640916124410">Click <strong id="EN-US_TOPIC_0021427650__b842352706112645">Attach Disk</strong>. In the displayed dialog box, select the system disk detached in step <a href="#EN-US_TOPIC_0021427650__li5640121684418">2.b</a> and attach it to the temporary ECS.</li></ol>
</li><li id="EN-US_TOPIC_0021427650__li676194525819">Log in to the temporary <span id="EN-US_TOPIC_0021427650__text15656171252116">ECS</span> remotely and reset the password.<ol type="a" id="EN-US_TOPIC_0021427650__ol1664081674412"><li id="EN-US_TOPIC_0021427650__li156401416124411">Locate the row containing the temporary <span id="EN-US_TOPIC_0021427650__text721719135217">ECS</span> and click <strong id="EN-US_TOPIC_0021427650__b1928191753511">Remote Login</strong> in the <strong id="EN-US_TOPIC_0021427650__b7569820203518">Operation</strong> column.</li><li id="EN-US_TOPIC_0021427650__li664021617445"><a name="EN-US_TOPIC_0021427650__li664021617445"></a><a name="li664021617445"></a>Run the following command to view the directory of the system disk detached from the original Linux <span id="EN-US_TOPIC_0021427650__text128003139216">ECS</span> now attached to the temporary <span id="EN-US_TOPIC_0021427650__text0483038133518">ECS</span>:<p id="EN-US_TOPIC_0021427650__p2640216174418"><strong id="EN-US_TOPIC_0021427650__b15640916174415">fdisk -l</strong></p>
</li><li id="EN-US_TOPIC_0021427650__li1964051624414">Run the following commands in the directory where the script is stored to run the script for resetting the password:<p id="EN-US_TOPIC_0021427650__p564061617440"><a name="EN-US_TOPIC_0021427650__li1964051624414"></a><a name="li1964051624414"></a><strong id="EN-US_TOPIC_0021427650__b156401316124413">chmod +x changepasswd.sh</strong></p>
<p id="EN-US_TOPIC_0021427650__p4640141611443"><strong id="EN-US_TOPIC_0021427650__b16401816134413">./changepasswd.sh</strong></p>
<p id="EN-US_TOPIC_0021427650__p1164012165444">When you run the password reset script, if the system displays a message indicating that there is no command related to logical volume manager (LVM), such as the message "no lvs command", install an LVM tool on the temporary <span id="EN-US_TOPIC_0021427650__text53227519121">ECS</span>. The LVM2 tool is recommended, which can be installed by running the <strong id="EN-US_TOPIC_0021427650__b8323145141216">yum install lvm2</strong> command.</p>
<div class="note" id="EN-US_TOPIC_0021427650__note11224173912520"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TOPIC_0021427650__p1464051604416">If the original <span id="EN-US_TOPIC_0021427650__text586431511218">ECS</span> and the temporary <span id="EN-US_TOPIC_0021427650__text115541554360">ECS</span> both run CentOS 7, a mount failure may occur during script execution. To resolve this issue, replace <strong id="EN-US_TOPIC_0021427650__b842352706173045">mount $dev $mountPath</strong> with <strong id="EN-US_TOPIC_0021427650__b842352706173058">mount -o nouuid $dev $mountPath</strong> in the script.</p>
</div></div>
</li><li id="EN-US_TOPIC_0021427650__li15640416144417">Enter the new password and the directory obtained in step <a href="#EN-US_TOPIC_0021427650__li664021617445">3.b</a> as prompted.<div class="p" id="EN-US_TOPIC_0021427650__p564041654415">If the following information is displayed, the password has been changed:<pre class="screen" id="EN-US_TOPIC_0021427650__screen16640161619442">set password success.</pre>
</div>
</li></ol>
</li><li id="EN-US_TOPIC_0021427650__li36758209552">For a non-<strong id="EN-US_TOPIC_0021427650__b1582413363577">root</strong> user, perform the following operations to enable the login permission of user <strong id="EN-US_TOPIC_0021427650__b15130111595817">root</strong>:<p id="EN-US_TOPIC_0021427650__p12728554124415"><strong id="EN-US_TOPIC_0021427650__b2383124215175">vi /etc/ssh/sshd_config</strong></p>
<p id="EN-US_TOPIC_0021427650__p3621162855713">Modify the following parameters:</p>
<ul id="EN-US_TOPIC_0021427650__ul1516854216562"><li id="EN-US_TOPIC_0021427650__li1916815425565">Change <strong id="EN-US_TOPIC_0021427650__b11195124707">PasswordAuthentication no</strong> to <strong id="EN-US_TOPIC_0021427650__b63211628405">PasswordAuthentication yes</strong>.<p id="EN-US_TOPIC_0021427650__p1889119432569">Alternatively, delete the comment tag (#) before <strong id="EN-US_TOPIC_0021427650__b145211047908">PasswordAuthentication yes</strong>.</p>
</li><li id="EN-US_TOPIC_0021427650__li17168154265617">Change <strong id="EN-US_TOPIC_0021427650__b7512121313119">PermitRootLogin no</strong> to <strong id="EN-US_TOPIC_0021427650__b13201131713114">PermitRootLogin yes</strong>.<p id="EN-US_TOPIC_0021427650__p27713442561">Alternatively, delete the comment tag (#) before <strong id="EN-US_TOPIC_0021427650__b1368162111119">PermitRootLogin yes</strong>.</p>
</li><li id="EN-US_TOPIC_0021427650__li875859105919">Change the value of <strong id="EN-US_TOPIC_0021427650__b267464515114">AllowUsers</strong> to <strong id="EN-US_TOPIC_0021427650__b9363258517">root</strong>.<p id="EN-US_TOPIC_0021427650__p1443514104116">Search for <strong id="EN-US_TOPIC_0021427650__b107175611310">AllowUsers</strong> in the file. If <strong id="EN-US_TOPIC_0021427650__b157110562031">AllowUsers</strong> is unavailable, add it at the end of the file.</p>
</li></ul>
</li><li id="EN-US_TOPIC_0021427650__li43791402591">Stop the temporary <span id="EN-US_TOPIC_0021427650__text119171718218">ECS</span>, detach the system disk, attach the system disk to the original Linux <span id="EN-US_TOPIC_0021427650__text11751134103714">ECS</span>, and restart the original Linux <span id="EN-US_TOPIC_0021427650__text5682103773718">ECS</span>.<ol type="a" id="EN-US_TOPIC_0021427650__ol166409160448"><li id="EN-US_TOPIC_0021427650__li10640201613447">Stop the temporary <span id="EN-US_TOPIC_0021427650__text14944171882117">ECS</span>, switch to the page providing details about the <span id="EN-US_TOPIC_0021427650__text1125615419377">ECS</span>, and click the <strong id="EN-US_TOPIC_0021427650__b1160311163815">Disks</strong> tab.</li><li id="EN-US_TOPIC_0021427650__li964031614447"><a name="EN-US_TOPIC_0021427650__li964031614447"></a><a name="li964031614447"></a>Click <strong id="EN-US_TOPIC_0021427650__b842352706163715">Detach</strong> to detach the data disk attached in step <a href="#EN-US_TOPIC_0021427650__li19814359584">2</a>.</li><li id="EN-US_TOPIC_0021427650__li18640151664410">On the page providing details about the original Linux <span id="EN-US_TOPIC_0021427650__text51188503815">ECS</span>, click the <strong id="EN-US_TOPIC_0021427650__b712475113816">Disks</strong> tab.</li><li id="EN-US_TOPIC_0021427650__li2064071618440">Click <strong id="EN-US_TOPIC_0021427650__b842352706163842">Attach Disk</strong>. In the displayed dialog box, select the data disk detached in step <a href="#EN-US_TOPIC_0021427650__li964031614447">5.b</a> and device name <strong id="EN-US_TOPIC_0021427650__b182401343117593">/dev/sda</strong>.</li><li id="EN-US_TOPIC_0021427650__li0640316124412">Restart the original Linux <span id="EN-US_TOPIC_0021427650__text289020202118">ECS</span>.</li></ol>
</li></ol>
</div>
</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="en-us_topic_0031073513.html">Passwords</a></div>
</div>
</div>

