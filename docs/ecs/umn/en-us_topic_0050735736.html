<a name="EN-US_TOPIC_0050735736"></a><a name="EN-US_TOPIC_0050735736"></a>

<h1 class="topictitle1">How Can a Changed Static Hostname Take Effect Permanently?</h1>
<div id="body1488533026902"><div class="section" id="EN-US_TOPIC_0050735736__section319352620019"><h4 class="sectiontitle">Symptom</h4><p id="EN-US_TOPIC_0050735736__p913134920199">The static hostname of a Linux <span id="EN-US_TOPIC_0050735736__text17907191894113">ECS</span> is user defined and injected using Cloud-Init during the <span id="EN-US_TOPIC_0050735736__text17476194942719">ECS</span> creation. Although the hostname can be changed by running the <strong id="EN-US_TOPIC_0050735736__b4221000620442">hostname</strong> command, the changed hostname is restored after the <span id="EN-US_TOPIC_0050735736__text221162134112">ECS</span> is restarted.</p>
</div>
<div class="section" id="EN-US_TOPIC_0050735736__section14535183616249"><h4 class="sectiontitle">Changing the Hostname on the <span id="EN-US_TOPIC_0050735736__text3966133194119">ECS</span></h4><p id="EN-US_TOPIC_0050735736__p1561610361249">To make the hostname changed by running the <strong id="EN-US_TOPIC_0050735736__b1161610361247">hostname</strong> command take effect even after the <span id="EN-US_TOPIC_0050735736__text1671822194118">ECS</span> is stopped or restarted, save the changed hostname into configuration files.</p>
<p id="EN-US_TOPIC_0050735736__p17616736192418">The changed hostname is assumed to be <span class="parmvalue" id="EN-US_TOPIC_0050735736__parmvalue1790127195192649"><b>new_hostname</b></span>.</p>
</div>
<ol id="EN-US_TOPIC_0050735736__ol261983682420"><li id="EN-US_TOPIC_0050735736__li2061763672419"><span>Modify the <span class="filepath" id="EN-US_TOPIC_0050735736__filepath667137767192711"><b>/etc/hostname</b></span> configuration file.</span><p><ol type="a" id="EN-US_TOPIC_0050735736__ol1461713616249"><li id="EN-US_TOPIC_0050735736__li961763612415">Run the following command to edit the configuration file:<p id="EN-US_TOPIC_0050735736__p661717365249"><a name="EN-US_TOPIC_0050735736__li961763612415"></a><a name="li961763612415"></a><strong id="EN-US_TOPIC_0050735736__b1261723632419">sudo vim /etc/hostname</strong></p>
</li><li id="EN-US_TOPIC_0050735736__li17617936152417">Change the hostname to the new one.</li><li id="EN-US_TOPIC_0050735736__li12617193619247">Run the following command to save and exit the configuration file:<p id="EN-US_TOPIC_0050735736__p186171436172419"><a name="EN-US_TOPIC_0050735736__li12617193619247"></a><a name="li12617193619247"></a><strong id="EN-US_TOPIC_0050735736__b186175367241">:wq</strong></p>
</li></ol>
</p></li><li id="EN-US_TOPIC_0050735736__li10618236122419"><span>Modify the <span class="filepath" id="EN-US_TOPIC_0050735736__filepath718128103192928"><b>/etc/sysconfig/network</b></span> configuration file.</span><p><ol type="a" id="EN-US_TOPIC_0050735736__ol146181936152414"><li id="EN-US_TOPIC_0050735736__li17617203613245">Run the following command to edit the configuration file:<p id="EN-US_TOPIC_0050735736__p136171636122414"><a name="EN-US_TOPIC_0050735736__li17617203613245"></a><a name="li17617203613245"></a><strong id="EN-US_TOPIC_0050735736__b1761723682420">sudo vim /etc/sysconfig/network</strong></p>
</li><li id="EN-US_TOPIC_0050735736__li16185369248">Change the <span class="parmname" id="EN-US_TOPIC_0050735736__parmname1608377003193031"><b>HOSTNAME</b></span> value to the new hostname.<p id="EN-US_TOPIC_0050735736__p1761712365240"><strong id="EN-US_TOPIC_0050735736__b266814724193048">HOSTNAME=</strong><em id="EN-US_TOPIC_0050735736__i1737516919193048">Changed hostname</em></p>
<div class="note" id="EN-US_TOPIC_0050735736__note59541421133411"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TOPIC_0050735736__p295511214342">If there is no <strong id="EN-US_TOPIC_0050735736__b1696019493615">HOSTNAME</strong> in the configuration file, manually add this parameter and set it to the changed hostname.</p>
</div></div>
<p id="EN-US_TOPIC_0050735736__p26181736112416">An example is provided as follows:</p>
<p id="EN-US_TOPIC_0050735736__p561893617245"><strong id="EN-US_TOPIC_0050735736__b126182036152415">HOSTNAME=new_hostname</strong></p>
</li><li id="EN-US_TOPIC_0050735736__li5618636182415">Run the following command to save and exit the configuration file:<p id="EN-US_TOPIC_0050735736__p13618736102415"><a name="EN-US_TOPIC_0050735736__li5618636182415"></a><a name="li5618636182415"></a><strong id="EN-US_TOPIC_0050735736__b1061883616248">:wq</strong></p>
</li></ol>
</p></li><li id="EN-US_TOPIC_0050735736__li166191036192411"><span>Modify the <span class="filepath" id="EN-US_TOPIC_0050735736__filepath393873376193113"><b>/etc/cloud/cloud.cfg</b></span> configuration file.</span><p><ol type="a" id="EN-US_TOPIC_0050735736__ol106191936122412"><li id="EN-US_TOPIC_0050735736__li2061853614244">Run the following command to edit the configuration file:<p id="EN-US_TOPIC_0050735736__p0618103672411"><a name="EN-US_TOPIC_0050735736__li2061853614244"></a><a name="li2061853614244"></a><strong id="EN-US_TOPIC_0050735736__b06181436152418">sudo vim /etc/cloud/cloud.cfg</strong></p>
</li><li id="EN-US_TOPIC_0050735736__li661911368243">Use either of the following methods to modify the configuration file:<ul id="EN-US_TOPIC_0050735736__ul2619183618240"><li id="EN-US_TOPIC_0050735736__li6619836192415">Method 1: Change the <span class="parmname" id="EN-US_TOPIC_0050735736__parmname126537449991924"><b>preserve_hostname</b></span> parameter value or add the <span class="parmname" id="EN-US_TOPIC_0050735736__parmname2105943769193214"><b>preserve_hostname</b></span> parameter to the configuration file.<p id="EN-US_TOPIC_0050735736__p961933622412">If <span class="parmname" id="EN-US_TOPIC_0050735736__parmname280030156193236"><b>preserve_hostname: false</b></span> is already available in the <span class="filepath" id="EN-US_TOPIC_0050735736__filepath87560684193251"><b>/etc/cloud/cloud.cfg</b></span> configuration file, change it to <span class="parmname" id="EN-US_TOPIC_0050735736__parmname44370856319336"><b>preserve_hostname: true</b></span>. If <span class="parmname" id="EN-US_TOPIC_0050735736__parmname1773720924193332"><b>preserve_hostname</b></span> is unavailable in the <span class="filepath" id="EN-US_TOPIC_0050735736__filepath1784393097193343"><b>/etc/cloud/cloud.cfg</b></span> configuration file, add <strong id="EN-US_TOPIC_0050735736__b198044657219342">preserve_hostname: true</strong> before <span class="parmname" id="EN-US_TOPIC_0050735736__parmname126378958419349"><b>cloud_init_modules</b></span>.</p>
<p id="EN-US_TOPIC_0050735736__p261973618248">If you use method 1, the changed hostname still takes effect after the <span id="EN-US_TOPIC_0050735736__text104199232417">ECS</span> is stopped or restarted. However, if the <span id="EN-US_TOPIC_0050735736__text12142141193210">ECS</span> is used to create a private image and the image is used to create a new <span id="EN-US_TOPIC_0050735736__text16145411325">ECS</span>, the hostname of the new <span id="EN-US_TOPIC_0050735736__text214771163216">ECS</span> is the hostname (<strong id="EN-US_TOPIC_0050735736__b3147121163219">new_hostname</strong>) used by the private image, and user-defined hostnames cannot be injected using Cloud-Init.</p>
</li><li id="EN-US_TOPIC_0050735736__li156192361242">Method 2 (recommended): Delete or comment out <strong id="EN-US_TOPIC_0050735736__b635371383194135">- update_hostname</strong>.<p id="EN-US_TOPIC_0050735736__p46191036122416">If you use method 2, the changed hostname still takes effect after the <span id="EN-US_TOPIC_0050735736__text23871926164113">ECS</span> is stopped or restarted. If the <span id="EN-US_TOPIC_0050735736__text380216013313">ECS</span> is used to create a private image and the image is used to create a new <span id="EN-US_TOPIC_0050735736__text98072005339">ECS</span>, the changed hostname permanently takes effect, and user-defined hostnames (such as <strong id="EN-US_TOPIC_0050735736__b980710063315">new_new_hostname</strong>) can be injected using Cloud-Init.</p>
</li></ul>
</li></ol>
</p></li><li id="EN-US_TOPIC_0050735736__li15619113613243"><span>Run the following command to restart the <span id="EN-US_TOPIC_0050735736__text16315132894113">ECS</span>:</span><p><p id="EN-US_TOPIC_0050735736__p1161913602410"><strong id="EN-US_TOPIC_0050735736__b116191736132417">sudo reboot</strong></p>
</p></li><li id="EN-US_TOPIC_0050735736__li161933613241"><span>Run the following command to check whether the hostname has been changed:</span><p><p id="EN-US_TOPIC_0050735736__p126191036192414"><strong id="EN-US_TOPIC_0050735736__b56191936142419">sudo hostname</strong></p>
<p id="EN-US_TOPIC_0050735736__p16191636182415">If the changed hostname is displayed in the command output, the hostname has been changed and the new name permanently takes effect.</p>
</p></li></ol>
</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="en-us_topic_0208808104.html">ECS Management</a></div>
</div>
</div>

