<a name="elb_ug_hd_0002"></a><a name="elb_ug_hd_0002"></a>

<h1 class="topictitle1">Configuring Security Group Rules for Backend Servers (Shared Load Balancers)</h1>
<h4 class="sectiontitle">Scenarios</h4><p id="elb_ug_hd_0002__p6141724362">Before you add <span id="elb_ug_hd_0002__text19169171131917">server</span>s to a backend <span id="elb_ug_hd_0002__text2381289321">server</span> group, ensure that their security groups have inbound rules that allow traffic from 100.125.0.0/16<span id="elb_ug_hd_0002__ph1820812303110"></span>, and specify the health check protocol and port. Otherwise, health checks will be affected, and backend servers cannot receive requests from the load balancer. If UDP is used for health checks, inbound security group rules must also allow the ICMP traffic.</p>
<p id="elb_ug_hd_0002__p697361661">If you have no VPCs when creating a server, the system will automatically create a VPC with default security rules. Default security group rules allow only communications among the <span id="elb_ug_hd_0002__text7439104617910">server</span>s in the VPC. You also need to configure inbound rules to enable the load balancer to communicate with these <span id="elb_ug_hd_0002__text523151316194">server</span>s over the frontend port and health check port.</p>

<h4 class="sectiontitle">Procedure</h4><ol id="elb_ug_hd_0002__ol198141563813"><li id="elb_ug_hd_0002__li677391520332">Log in to the management console.</li><li id="elb_ug_hd_0002__li675519100420">In the upper left corner of the page, click <span><img id="elb_ug_hd_0002__en-us_topic_0240829509_image177714713415" src="en-us_image_0241356603.png"></span> and select the desired region and project.</li><li id="elb_ug_hd_0002__en-us_topic_0029320966_li50026016224047">Hover on <span><img id="elb_ug_hd_0002__image1617712272255" src="en-us_image_0000001167495475.png"></span> in the upper left corner to display <strong id="elb_ug_hd_0002__b11772027122513">Service List</strong> and choose <strong id="elb_ug_hd_0002__b5177152714259">Computing</strong> &gt; <strong id="elb_ug_hd_0002__b1817772710259">Elastic Cloud Server</strong>.</li><li id="elb_ug_hd_0002__li34401539214315">In the ECS list, locate the ECS and click its name.<p id="elb_ug_hd_0002__p19982029214319"><a name="elb_ug_hd_0002__li34401539214315"></a><a name="li34401539214315"></a>The ECS details page is displayed.</p>
</li><li id="elb_ug_hd_0002__li18750165432511">Click <strong id="elb_ug_hd_0002__b8423527069595">Security Groups</strong>, locate the security group, and view security group rules.</li><li id="elb_ug_hd_0002__li865918101351">Click the security group rule ID or <strong id="elb_ug_hd_0002__b86601510183510">Modify Security Group Rule</strong>.<p id="elb_ug_hd_0002__p18779141316356">The security group details page is displayed.</p>
</li><li id="elb_ug_hd_0002__en-us_topic_0029320966_li46525942225810">Under <strong id="elb_ug_hd_0002__b9614133719114">Inbound Rules</strong>, click <strong id="elb_ug_hd_0002__b2917144512114">Add Rule</strong>.<p id="elb_ug_hd_0002__p4142315143212"><strong id="elb_ug_hd_0002__b20415112616360">TCP, HTTP, or HTTPS listeners</strong></p>
<ul id="elb_ug_hd_0002__ul432212011336"><li id="elb_ug_hd_0002__li632211204331">If the health check port is not the one used by each backend server, add inbound rules to allow TCP traffic over the health check port and the ports used by backend servers.</li><li id="elb_ug_hd_0002__li4322172093312">If you do not specify a health check port, add inbound rules to allow TCP traffic over the ports used by backend servers.</li><li id="elb_ug_hd_0002__li15322162093315">The inbound rules must also allow access from 100.125.0.0/16<span id="elb_ug_hd_0002__ph19329173121018"></span>. Otherwise, health checks will fail.</li></ul>
<p id="elb_ug_hd_0002__p115214116334"><strong id="elb_ug_hd_0002__b097114139368">UDP listeners</strong></p>
<ul id="elb_ug_hd_0002__ul166533361923"><li id="elb_ug_hd_0002__li46536362215">If the health check port is not the one used by each backend server, add inbound rules to allow UDP traffic over the health check port and the ports used by backend servers.</li><li id="elb_ug_hd_0002__li116531636426">If you do not specify a health check port, add inbound rules to allow UDP traffic over the ports used by backend servers.</li><li id="elb_ug_hd_0002__li1565412361218">The inbound rules must also allow access from 100.125.0.0/16<span id="elb_ug_hd_0002__ph16264612105818"></span>. Otherwise, health checks will fail.</li><li id="elb_ug_hd_0002__li106545361424">You need also to add an inbound rule to allow ICMP traffic.</li></ul>
</li><li id="elb_ug_hd_0002__li1030715242413">Click <strong id="elb_ug_hd_0002__b8423527061928">OK</strong>.</li></ol>

<h4 class="sectiontitle">Firewall Rule</h4><p id="elb_ug_hd_0002__p3997193819710">You can associate one or more subnets with a firewall for controlling traffic in and out of the subnets. Similar to security groups, firewalls provide access control functions, but add an additional layer of defense to your VPC. Default firewall rules reject all inbound and outbound traffic. If the subnet of a load balancer or associated backend servers has a firewall associated, the load balancer cannot receive traffic from the Internet or route traffic to backend servers, and backend servers cannot receive traffic from and respond to the load balancer.</p>
<p id="elb_ug_hd_0002__p79433211595">You can configure an inbound firewall rule to permit access from 100.125.0.0/16<span id="elb_ug_hd_0002__ph762162974312"></span>.</p>
<p id="elb_ug_hd_0002__p188635318526">ELB translates public IP addresses that access backend servers into IP addresses in 100.125.0.0/16<span id="elb_ug_hd_0002__ph1640552616914"></span>. You cannot configure firewall rules to prevent public IP addresses from accessing backend servers to allow traffic from 100.125.0.0/16 to all backend servers.</p>
<ol id="elb_ug_hd_0002__ol17965143881417"><li id="elb_ug_hd_0002__li20860192818532">Log in to the management console.</li><li id="elb_ug_hd_0002__li1486022812537">In the upper left corner of the page, click <span><img id="elb_ug_hd_0002__en-us_topic_0240829509_image177714713415_1" src="en-us_image_0241356603.png"></span> and select the desired region and project.</li><li id="elb_ug_hd_0002__l2446029456ed45d08632be6e309b1c82">Under <strong id="elb_ug_hd_0002__b1786225315520">Network</strong>, click <strong id="elb_ug_hd_0002__b9112421133718">Virtual Private Cloud</strong>.</li><li id="elb_ug_hd_0002__li47160469161557">In the navigation pane on the left, choose <strong id="elb_ug_hd_0002__b132711555103617">Access Control</strong> &gt; <strong id="elb_ug_hd_0002__b1827355511364">Firewalls</strong>.</li><li id="elb_ug_hd_0002__li30045754154757">Locate the firewall, and click the firewall name to switch to the firewall details page.</li><li id="elb_ug_hd_0002__li1976338154757">On the <strong id="elb_ug_hd_0002__b16992330173711">Inbound Rules</strong> or <strong id="elb_ug_hd_0002__b1499353014377">Outbound Rules</strong> tab page, click <strong id="elb_ug_hd_0002__b7993030143715">Add Rule</strong> to add a rule.<ul id="elb_ug_hd_0002__ul185172012178"><li id="elb_ug_hd_0002__li4511820191719"><strong id="elb_ug_hd_0002__b103837331378">Action</strong>: Select <strong id="elb_ug_hd_0002__b11383173311379">Allow</strong>.</li><li id="elb_ug_hd_0002__li8626942141716"><strong id="elb_ug_hd_0002__b319013893714">Protocol</strong>: The protocol must be the same as the frontend protocol you select when you add the listener.</li><li id="elb_ug_hd_0002__li9500202313188"><strong id="elb_ug_hd_0002__b183643993714">Source</strong>: Set the value to <strong id="elb_ug_hd_0002__b4837239203719">100.125.0.0/16<span id="elb_ug_hd_0002__ph48650374431"></span></strong>.</li><li id="elb_ug_hd_0002__li66251610162417"><strong id="elb_ug_hd_0002__b27061041103719">Source Port Range</strong>: Select the port range.</li><li id="elb_ug_hd_0002__li7464162916350"><strong id="elb_ug_hd_0002__b7201144183717">Destination</strong>: Enter the default value <strong id="elb_ug_hd_0002__b164094559370">0.0.0.0/0</strong>. Traffic will be destined for all IP addresses.</li><li id="elb_ug_hd_0002__li5915133319341"><strong id="elb_ug_hd_0002__b0931145823718">Destination Port Range</strong>: Select the port range.</li><li id="elb_ug_hd_0002__li75457153520"><strong id="elb_ug_hd_0002__b1455819389">Description</strong>: Enter a description for the firewall rule if necessary.</li></ul>
</li><li id="elb_ug_hd_0002__li162953310168">Click <strong id="elb_ug_hd_0002__b17342202183812">OK</strong>.</li></ol>







